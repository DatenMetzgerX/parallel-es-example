webpackJsonp([0],[,,,function(module,exports,__webpack_require__){"use strict";function Events(){}function EE(fn,context,once){this.fn=fn,this.context=context,this.once=once||!1}function EventEmitter(){this._events=new Events,this._eventsCount=0}var has=Object.prototype.hasOwnProperty,prefix="~";Object.create&&(Events.prototype=Object.create(null),(new Events).__proto__||(prefix=!1)),EventEmitter.prototype.eventNames=function(){var events,name,names=[];if(0===this._eventsCount)return names;for(name in events=this._events)has.call(events,name)&&names.push(prefix?name.slice(1):name);return Object.getOwnPropertySymbols?names.concat(Object.getOwnPropertySymbols(events)):names},EventEmitter.prototype.listeners=function(event,exists){var evt=prefix?prefix+event:event,available=this._events[evt];if(exists)return!!available;if(!available)return[];if(available.fn)return[available.fn];for(var i=0,l=available.length,ee=new Array(l);i<l;i++)ee[i]=available[i].fn;return ee},EventEmitter.prototype.emit=function(event,a1,a2,a3,a4,a5){var evt=prefix?prefix+event:event;if(!this._events[evt])return!1;var args,i,listeners=this._events[evt],len=arguments.length;if(listeners.fn){switch(listeners.once&&this.removeListener(event,listeners.fn,void 0,!0),len){case 1:return listeners.fn.call(listeners.context),!0;case 2:return listeners.fn.call(listeners.context,a1),!0;case 3:return listeners.fn.call(listeners.context,a1,a2),!0;case 4:return listeners.fn.call(listeners.context,a1,a2,a3),!0;case 5:return listeners.fn.call(listeners.context,a1,a2,a3,a4),!0;case 6:return listeners.fn.call(listeners.context,a1,a2,a3,a4,a5),!0}for(i=1,args=new Array(len-1);i<len;i++)args[i-1]=arguments[i];listeners.fn.apply(listeners.context,args)}else{var j,length=listeners.length;for(i=0;i<length;i++)switch(listeners[i].once&&this.removeListener(event,listeners[i].fn,void 0,!0),len){case 1:listeners[i].fn.call(listeners[i].context);break;case 2:listeners[i].fn.call(listeners[i].context,a1);break;case 3:listeners[i].fn.call(listeners[i].context,a1,a2);break;case 4:listeners[i].fn.call(listeners[i].context,a1,a2,a3);break;default:if(!args)for(j=1,args=new Array(len-1);j<len;j++)args[j-1]=arguments[j];listeners[i].fn.apply(listeners[i].context,args)}}return!0},EventEmitter.prototype.on=function(event,fn,context){var listener=new EE(fn,context||this),evt=prefix?prefix+event:event;return this._events[evt]?this._events[evt].fn?this._events[evt]=[this._events[evt],listener]:this._events[evt].push(listener):(this._events[evt]=listener,this._eventsCount++),this},EventEmitter.prototype.once=function(event,fn,context){var listener=new EE(fn,context||this,!0),evt=prefix?prefix+event:event;return this._events[evt]?this._events[evt].fn?this._events[evt]=[this._events[evt],listener]:this._events[evt].push(listener):(this._events[evt]=listener,this._eventsCount++),this},EventEmitter.prototype.removeListener=function(event,fn,context,once){var evt=prefix?prefix+event:event;if(!this._events[evt])return this;if(!fn)return 0===--this._eventsCount?this._events=new Events:delete this._events[evt],this;var listeners=this._events[evt];if(listeners.fn)listeners.fn!==fn||once&&!listeners.once||context&&listeners.context!==context||(0===--this._eventsCount?this._events=new Events:delete this._events[evt]);else{for(var i=0,events=[],length=listeners.length;i<length;i++)(listeners[i].fn!==fn||once&&!listeners[i].once||context&&listeners[i].context!==context)&&events.push(listeners[i]);events.length?this._events[evt]=1===events.length?events[0]:events:0===--this._eventsCount?this._events=new Events:delete this._events[evt]}return this},EventEmitter.prototype.removeAllListeners=function(event){var evt;return event?(evt=prefix?prefix+event:event,this._events[evt]&&(0===--this._eventsCount?this._events=new Events:delete this._events[evt])):(this._events=new Events,this._eventsCount=0),this},EventEmitter.prototype.off=EventEmitter.prototype.removeListener,EventEmitter.prototype.addListener=EventEmitter.prototype.on,EventEmitter.prototype.setMaxListeners=function(){return this},EventEmitter.prefixed=prefix,EventEmitter.EventEmitter=EventEmitter,module.exports=EventEmitter},function(module,exports){function defaultSetTimout(){throw new Error("setTimeout has not been defined")}function defaultClearTimeout(){throw new Error("clearTimeout has not been defined")}function runTimeout(fun){if(cachedSetTimeout===setTimeout)return setTimeout(fun,0);if((cachedSetTimeout===defaultSetTimout||!cachedSetTimeout)&&setTimeout)return cachedSetTimeout=setTimeout,setTimeout(fun,0);try{return cachedSetTimeout(fun,0)}catch(e){try{return cachedSetTimeout.call(null,fun,0)}catch(e){return cachedSetTimeout.call(this,fun,0)}}}function runClearTimeout(marker){if(cachedClearTimeout===clearTimeout)return clearTimeout(marker);if((cachedClearTimeout===defaultClearTimeout||!cachedClearTimeout)&&clearTimeout)return cachedClearTimeout=clearTimeout,clearTimeout(marker);try{return cachedClearTimeout(marker)}catch(e){try{return cachedClearTimeout.call(null,marker)}catch(e){return cachedClearTimeout.call(this,marker)}}}function cleanUpNextTick(){draining&&currentQueue&&(draining=!1,currentQueue.length?queue=currentQueue.concat(queue):queueIndex=-1,queue.length&&drainQueue())}function drainQueue(){if(!draining){var timeout=runTimeout(cleanUpNextTick);draining=!0;for(var len=queue.length;len;){for(currentQueue=queue,queue=[];++queueIndex<len;)currentQueue&&currentQueue[queueIndex].run();queueIndex=-1,len=queue.length}currentQueue=null,draining=!1,runClearTimeout(timeout)}}function Item(fun,array){this.fun=fun,this.array=array}function noop(){}var cachedSetTimeout,cachedClearTimeout,process=module.exports={};!function(){try{cachedSetTimeout="function"==typeof setTimeout?setTimeout:defaultSetTimout}catch(e){cachedSetTimeout=defaultSetTimout}try{cachedClearTimeout="function"==typeof clearTimeout?clearTimeout:defaultClearTimeout}catch(e){cachedClearTimeout=defaultClearTimeout}}();var currentQueue,queue=[],draining=!1,queueIndex=-1;process.nextTick=function(fun){var args=new Array(arguments.length-1);if(arguments.length>1)for(var i=1;i<arguments.length;i++)args[i-1]=arguments[i];queue.push(new Item(fun,args)),1!==queue.length||draining||runTimeout(drainQueue)},Item.prototype.run=function(){this.fun.apply(null,this.array)},process.title="browser",process.browser=!0,process.env={},process.argv=[],process.version="",process.versions={},process.on=noop,process.addListener=noop,process.once=noop,process.off=noop,process.removeListener=noop,process.removeAllListeners=noop,process.emit=noop,process.binding=function(name){throw new Error("process.binding is not supported")},process.cwd=function(){return"/"},process.chdir=function(dir){throw new Error("process.chdir is not supported")},process.umask=function(){return 0}},,,,,,,function(module,exports,__webpack_require__){(function(process,global){var _typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(obj){return typeof obj}:function(obj){return obj&&"function"==typeof Symbol&&obj.constructor===Symbol&&obj!==Symbol.prototype?"symbol":typeof obj},hamsters={version:"3.9",debug:!1,cache:!1,persistence:!0,maxThreads:navigator.hardwareConcurrency||4,tools:{},wheel:{env:{legacy:!1,node:!1,shell:!1,worker:!1,browser:!1,ie10:!1,transferrable:!0},queue:{running:[],pending:[]},hamsters:[],tasks:[],errors:[],uri:null}};!function(){"use strict";var isIE=function(version){return new RegExp("msie"+(isNaN(version)?"":"\\s"+version),"i").test(navigator.userAgent)},setupEnv=function(callback){if(hamsters.wheel.env.browser="object"===("undefined"==typeof window?"undefined":_typeof(window)),hamsters.wheel.env.worker="function"==typeof importScripts,hamsters.wheel.env.node=!("object"!==("undefined"==typeof process?"undefined":_typeof(process))||hamsters.wheel.env.browser||hamsters.wheel.env.worker||hamsters.wheel.env.reactNative),hamsters.wheel.env.reactNative=!hamsters.wheel.env.node&&"object"===("undefined"==typeof global?"undefined":_typeof(global)),hamsters.wheel.env.shell=!(hamsters.wheel.env.browser||hamsters.wheel.env.node||hamsters.wheel.env.worker||hamsters.wheel.env.reactNative),(hamsters.wheel.env.reactNative||hamsters.wheel.env.node)&&(global.self=global),hamsters.wheel.env.browser&&!hamsters.wheel.env.worker){if(isIE(10))try{var hamster=new Worker("common/wheel.min.js");hamster.terminate(),hamsters.wheel.env.ie10=!0}catch(e){hamsters.wheel.env.legacy=!0}self.Worker&&navigator.userAgent.indexOf("Kindle/3.0")===-1&&navigator.userAgent.indexOf("Mobile/8F190")===-1&&navigator.userAgent.indexOf("IEMobile")===-1?navigator.userAgent.toLowerCase().indexOf("firefox")!==-1&&hamsters.maxThreads>20&&(hamsters.maxThreads=20):hamsters.wheel.env.legacy=!0}if(hamsters.wheel.env.worker)try{hamsters.wheel.uri=self.URL.createObjectURL(createBlob("("+String(giveHamsterWork(!0))+"());"));new SharedWorker(hamsters.wheel.uri,"SharedHamsterWheel")}catch(e){hamsters.wheel.env.legacy=!0}hamsters.wheel.env.shell&&(hamsters.wheel.env.legacy=!0),Uint8Array||(hamsters.wheel.env.transferrable=!1),callback(hamsters.wheel.env.legacy)};hamsters.tools.checkErrors=function(){return{msg:"There are currently "+hamsters.wheel.errors.length+" errors captured in the wheel",total:hamsters.wheel.errors.length,errors:hamsters.wheel.errors}},hamsters.tools.splitArray=function(array,n){var i=0,tasks=[],size=Math.ceil(array.length/n);if(array.slice)for(;i<array.length;)tasks.push(array.slice(i,i+=size));else for(;i<array.length;)tasks.push(array.subarray(i,i+=size));return tasks},hamsters.tools.loop=function(input,callback){if(!input.array)return void console.error("Missing data array");var threads=input.threads||1;hamsters.wheel.env.legacy||(input.operator=String(input.operator),hamsters.wheel.env.worker||(input.operator=input.operator.substring(input.operator.indexOf("{")+1,input.operator.length-1)));var params={run:input.operator,init:input.startIndex||0,array:input.array,incrementBy:input.incrementBy||1,dataType:input.dataType||null,worker:hamsters.wheel.env.worker};1===threads?params.limit=input.limit||input.array.length:params.limit="compute",hamsters.run(params,function(){"string"==typeof self.params.run?self.params.worker?self.operator=eval("("+self.params.run+")"):self.operator=new Function(self.params.run):self.operator=self.params.run,"compute"===self.params.limit&&(self.params.limit=self.params.array.length);var i=0;for(i=self.params.init;i<self.params.limit;i+=self.params.incrementBy)rtn.data.push(self.operator(self.params.array[i]))},function(output){callback(output)},threads,!0,input.dataType)},hamsters.tools.parseJson=function(string,callback){hamsters.run({input:string},function(){rtn.data.push(JSON.parse(params.input))},function(output){callback(output[0])},1,!0)},hamsters.tools.stringifyJson=function(json,callback){hamsters.run({input:json},function(){rtn.data.push(JSON.stringify(params.input))},function(output){callback(output[0])},1,!0)},hamsters.tools.randomArray=function(count,callback){if(!count||!callback)return void hamsters.wheel.errors.push({msg:"Unable to generate random array, missing required params"});var params={count:count};hamsters.run(params,function(){for(var total=params.count,i=0;i<total;)rtn.data[rtn.data.length]=Math.round(99*Math.random()+1),i+=1},function(output){callback(output)},1,!1,null,!1)},hamsters.wheel.compareArrays=function(array1,array2){return!array1&&!array2||array1.length===array2.length&&array1.every(function(el,i){return el===array2[i]})},hamsters.wheel.checkCache=function(fn,input,dataType){for(var item=void 0,i=0,len=sessionStorage.length;i<len;i++){item=eval("("+sessionStorage[i]+")");var equals=hamsters.wheel.compareArrays(item.input,input);if(item&&item.func===fn&&equals&&!item.dataType&&!dataType)return item.output;if(item&&item.func===fn&&equals&&item.dataType===dataType)return hamsters.wheel.processDataType(item.dataType,item.output)}},hamsters.wheel.memoize=function(fn,inputArray,output,dataType){if(!hamsters.wheel.checkCache(fn,input,dataType))try{sessionStorage.setItem(sessionStorage.length,JSON.stringify({func:fn,input:inputArray,output:output,dataType:dataType}))}catch(eve){if("QuotaExceededError"===eve.name){sessionStorage.clear();try{sessionStorage.setItem(sessionStorage.length,JSON.stringify({func:fn,input:inputArray,output:output,dataType:dataType}))}catch(e){return}}}};var spawnHamsters=function(){if(hamsters.wheel.env.browser&&(hamsters.wheel.uri=self.URL.createObjectURL(createBlob("("+String(giveHamsterWork(!1))+"());"))),hamsters.persistence){var i=hamsters.maxThreads;for(i;i>0;i--)hamsters.wheel.env.node||hamsters.wheel.env.ie10?hamsters.wheel.hamsters.push(new Worker("common/wheel.min.js")):hamsters.wheel.env.worker?hamsters.wheel.hamsters.push(new SharedWorker(hamsters.wheel.uri,"SharedHamsterWheel")):hamsters.wheel.hamsters.push(new Worker(hamsters.wheel.uri))}},giveHamsterWork=function giveHamsterWork(worker){return worker?function(){self.processDataType=function(dataType,buffer){var types={uint32:Uint32Array,uint16:Uint16Array,uint8:Uint8Array,uint8clamped:Uint8ClampedArray,int32:Int32Array,int16:Int16Array,int8:Int8Array,float32:Float32Array,float64:Float64Array};return types[dataType]?new types[dataType](buffer):dataType},self.addEventListener("connect",function(e){var port=e.ports[0];port.start(),port.addEventListener("message",function(e){self.rtn={success:!0,data:[]},self.params=e.data,self.fn=eval("("+params.fn+")"),fn&&self.fn(),self.params.dataType&&"na"!=self.params.dataType&&(self.rtn.data=self.processDataType(self.params.dataType,self.rtn.data),self.rtn.dataType=self.params.dataType),port.postMessage({results:self.rtn})},!1)},!1)}:function(){self.processDataType=function(dataType,buffer){var types={uint32:Uint32Array,uint16:Uint16Array,uint8:Uint8Array,uint8clamped:Uint8ClampedArray,int32:Int32Array,int16:Int16Array,int8:Int8Array,float32:Float32Array,float64:Float64Array};return types[dataType]?new types[dataType](buffer):dataType},self.onmessage=function(e){self.rtn={success:!0,data:[]},self.params=e.data,self.fn=new Function(self.params.fn),self.fn&&self.fn(),self.params.dataType&&"na"!=self.params.dataType?(self.rtn.data=self.processDataType(self.params.dataType,self.rtn.data),self.rtn.dataType=self.params.dataType,self.postMessage({results:self.rtn},[rtn.data.buffer])):self.postMessage({results:self.rtn})}}};hamsters.wheel.sort=function(arr,order){return"desc"===order?Array.prototype.sort.call(arr,function(a,b){return b-a}):"asc"===order?Array.prototype.sort.call(arr,function(a,b){return a-b}):"ascAlpha"===order?arr.sort():"descAlpha"===order?arr.reverse():void 0},hamsters.run=function(params,fn,callback,workers,aggregate,dataType,memoize,order){if(!params||!fn)return"Error processing for loop, missing params or function";workers=workers||1;var task=hamsters.wheel.newTask(hamsters.wheel.tasks.length,workers,order,dataType,fn,callback);if(dataType&&(dataType=dataType.toLowerCase()),hamsters.cache&&memoize){var _ret=function(){var result=hamsters.wheel.checkCache(fn,task.input,dataType);if(result&&callback)return setTimeout(function(){hamsters.wheel.tasks[taskid]=null,callback(result)},4),{v:void 0}}();if("object"===("undefined"==typeof _ret?"undefined":_typeof(_ret)))return _ret.v}else hamsters.wheel.work(task,params,fn,callback,aggregate,dataType,memoize,order)},hamsters.wheel.work=function(task,params,fn,callback,aggregate,dataType,memoize,order){var workArray=params.array||null;params.array&&1!==task.threads&&(workArray=hamsters.tools.splitArray(params.array,task.threads)),hamsters.wheel.env.legacy?params.fn=fn:(params.fn=String(fn),hamsters.wheel.env.worker||(params.fn=params.fn.substring(params.fn.indexOf("{")+1,params.fn.length-1)));var food={},key=void 0;for(key in params)params.hasOwnProperty(key)&&"array"!==key&&(food[key]=params[key]);food.dataType=dataType;for(var i=0;i<task.threads;)workArray&&1!==task.threads?hamsters.wheel.newWheel(workArray[i],food,aggregate,callback,task,task.count,null,memoize):hamsters.wheel.newWheel(workArray,food,aggregate,callback,task,task.count,null,memoize),i+=1},hamsters.wheel.newTask=function(taskid,workers,order,dataType,fn,cb){return hamsters.wheel.tasks.push({id:taskid,workers:[],count:0,threads:workers,input:[],dataType:dataType||null,fn:fn,output:[],order:order||null,callback:cb}),hamsters.wheel.tasks[taskid]},hamsters.wheel.trackInput=function(inputArray,threadid,task,hamsterfood){task.input.push({input:inputArray,workerid:threadid,taskid:task.id,params:hamsterfood,start:(new Date).getTime()})},hamsters.wheel.trackThread=function(task,running,id){task.workers.push(id),running.push(id)},hamsters.wheel.poolThread=function(inputArray,hamsterfood,threadid,cb,task,agg,memoize){hamsters.wheel.queue.pending.push({memoize:memoize,input:inputArray,params:hamsterfood,workerid:threadid,callback:cb,task:task,aggregate:agg})},hamsters.wheel.legacyProcessor=function(params,inputArray,callback){setTimeout(function(){self.rtn={success:!0,data:[]},self.params=params,self.params.array=inputArray,self.params.fn?(self.params.fn(),self.params.dataType&&(self.rtn.data=hamsters.wheel.processDataType(self.params.dataType,self.rtn.data),self.rtn.dataType=self.params.dataType),callback(self.rtn)):(self.rtn.success=!1,self.rtn.error="Missing function",callback(self.rtn))},4)};var createBlob=function(textContent){if(!self.Blob){self.BlobBuilder=self.BlobBuilder||self.WebKitBlobBuilder||self.MozBlobBuilder||self.MSBlobBuilder;var blob=new BlobBuilder;return blob.append([textContent],{type:"application/javascript"}),blob.getBlob()}return new Blob([textContent],{type:"application/javascript"})};hamsters.tools.aggregate=function(input,dataType){if(!dataType||!hamsters.wheel.env.transferrable)return input.reduce(function(a,b){return a.concat(b)});var i=0,len=input.length,bufferLength=0;for(i;i<len;i+=1)bufferLength+=input[i].length;var output=hamsters.wheel.processDataType(dataType,bufferLength),offset=0;for(i=0;i<len;i+=1)output.set(input[i],offset),offset+=input[i].length;return output},hamsters.wheel.getOutput=function(output,aggregate,dataType){return aggregate&&output.length<=20?hamsters.tools.aggregate(output,dataType):output},hamsters.wheel.processQueue=function(hamster,item){item&&hamsters.wheel.newWheel(item.input,item.params,item.aggregate,item.callback,item.task,item.workerid,hamster,item.memoize)},hamsters.wheel.clean=function(task,id){hamsters.wheel.queue.running.splice(hamsters.wheel.queue.running.indexOf(id),1),task.workers.splice(task.workers.indexOf(id),1)},hamsters.wheel.trainHamster=function(id,aggregate,callback,task,hamster,memoize){var onmessage=function(e,results){hamsters.wheel.clean(task,id),results=e.data.results,task.output[id]=results.data,"verbose"===hamsters.debug&&console.info("Hamster #"+id+" finished @ "+e.timeStamp),0===task.workers.length&&task.count===task.threads&&(callback(task.order?hamsters.wheel.sort(hamsters.wheel.getOutput(task.output,aggregate,results.dataType),task.order):hamsters.wheel.getOutput(task.output,aggregate,results.dataType)),hamsters.debug&&console.info("Execution Complete! Elapsed: "+(e.timeStamp-task.input[0].start)/1e3+"s"),hamsters.wheel.tasks[task.id]=null,hamsters.cache&&memoize&&prepareToMemoize(task,aggregate,results)),0!==hamsters.wheel.queue.pending.length?hamsters.wheel.processQueue(hamster,hamsters.wheel.queue.pending.shift()):hamsters.persistence||hamsters.wheel.env.worker||hamster.terminate()},prepareToMemoize=function(task,aggregate,results){var output=hamsters.wheel.getOutput(task.output,aggregate,results.dataType);output&&!output.slice?hamsters.wheel.memoize(task.fn,task.input[0].input,hamsters.wheel.normalizeArray(output),results.dataType):hamsters.wheel.memoize(task.fn,task.input[0].input,hamsters.wheel.getOutput(task.output,aggregate,results.dataType),results.dataType)},onerror=function(e){hamsters.wheel.env.worker||hamster.terminate(),hamsters.wheel.errors.push({msg:"Error Hamster #"+id+": Line "+e.lineno+" in "+e.filename+": "+e.message}),console.error("Error Hamster #"+id+": Line "+e.lineno+" in "+e.filename+": "+e.message)};hamsters.wheel.env.worker?(hamster.port.onmessage=onmessage,hamster.port.onerror=onerror):(hamster.onmessage=onmessage,hamster.onerror=onerror)},hamsters.wheel.normalizeArray=function(input){var arr=[],n=0,len=input.length;for(n;n<len;n+=1)arr.push(input[n]);return arr},hamsters.wheel.processData=function(dataType,buffer){var types={uint32:Uint32Array,uint16:Uint16Array,uint8:Uint8Array,uint8clamped:Uint8ClampedArray,int32:Int32Array,int16:Int16Array,int8:Int8Array,float32:Float32Array,float64:Float64Array};return types[dataType]?new types[dataType](buffer):dataType},hamsters.wheel.processDataType=function(dataType,buffer){return hamsters.wheel.env.transferrable?hamsters.wheel.processData(dataType,buffer):buffer},hamsters.wheel.feedHamster=function(hamster,food,inputArray){if(hamsters.wheel.env.worker||hamsters.wheel.env.ie10)food.array=inputArray,hamsters.wheel.env.ie10?(food.ie=!0,hamster.postMessage(food)):hamster.port.postMessage(food);else{var key=void 0,buffers=[];inputArray&&(food.dataType?food.array=hamsters.wheel.processDataType(food.dataType,inputArray):food.array=inputArray);for(key in food)food.hasOwnProperty(key)&&food[key]&&food[key].buffer&&buffers.push(food[key].buffer);hamster.postMessage(food,buffers)}},setupEnv(function(legacy){legacy?hamsters.wheel.newWheel=function(inputArray,hamsterfood,aggregate,callback,task,threadid,hamster,memoize){hamsters.wheel.trackThread(task,hamsters.wheel.queue.running,threadid),(memoize||hamsters.debug)&&hamsters.wheel.trackInput(inputArray,threadid,task,hamsterfood),hamsters.wheel.legacyProcessor(hamsterfood,inputArray,function(output){hamsters.wheel.clean(task,threadid),task.output[threadid]=output.data,0===task.workers.length&&task.count===task.threads&&(hamsters.debug&&console.info("Execution Complete! Elapsed: "+((new Date).getTime()-task.input[0].start)/1e3+"s"),callback(hamsters.wheel.getOutput(task.output,aggregate,output.dataType)),hamsters.wheel.tasks[task.id]=null,hamsters.cache&&memoize!==!1&&(output.data.length>0&&!output.dataType?hamsters.wheel.memoize(task.fn,task.input,output.data,"na"):output.data.length>0&&output.dataType&&hamsters.wheel.memoize(task.fn,task.input,hamsters.wheel.normalizeArray(output.data),output.dataType)))}),task.count+=1}:(hamsters.wheel.newWheel=function(inputArray,hamsterfood,aggregate,callback,task,threadid,hamster,memoize){return hamsters.maxThreads===hamsters.wheel.queue.running.length?void hamsters.wheel.poolThread(inputArray,hamsterfood,threadid,callback,task,aggregate,memoize):((memoize||hamsters.debug)&&hamsters.wheel.trackInput(inputArray,threadid,task,hamsterfood),hamster||(hamster=hamsters.persistence?hamsters.wheel.hamsters[hamsters.wheel.queue.running.length]:hamsters.wheel.env.node||hamsters.wheel.env.ie10?new Worker("common/wheel.min.js"):hamsters.wheel.env.worker?new SharedWorker(hamsters.wheel.uri,"SharedHamsterWheel"):new Worker(hamsters.wheel.uri)),hamsters.wheel.trainHamster(threadid,aggregate,callback,task,hamster,memoize),hamsters.wheel.trackThread(task,hamsters.wheel.queue.running,threadid),hamsters.wheel.feedHamster(hamster,hamsterfood,inputArray),task.count+=1,void("verbose"===hamsters.debug&&console.info("Spawning Hamster #"+threadid+" @ "+(new Date).getTime())))},spawnHamsters())})}(),exports.hamsters=hamsters}).call(exports,__webpack_require__(4),__webpack_require__(0))},function(module,exports){!function(){function extend(from,to){to||(to={});for(var i in from)void 0===to[i]&&(to[i]=from[i]);return to}function Operation(){this._callbacks=[],this._errCallbacks=[],this._resolved=0,this._result=null}function Parallel(data,options){this.data=data,this.options=extend(defaults,options),this.operation=new Operation,this.operation.resolve(null,this.data),this.requiredScripts=[],this.requiredFunctions=[]}var isCommonJS="undefined"!=typeof module&&module.exports,isNode=!("undefined"!=typeof window&&this===window),setImmediate=setImmediate||function(cb){setTimeout(cb,0)},Worker=isNode?require(__dirname+"/Worker.js"):self.Worker,URL="undefined"!=typeof self?self.URL?self.URL:self.webkitURL:null,_supports=!(!isNode&&!self.Worker);Operation.prototype.resolve=function(err,res){if(err){this._resolved=2,this._result=err;for(var iE=0;iE<this._errCallbacks.length;++iE)this._errCallbacks[iE](err)}else{this._resolved=1,this._result=res;for(var i=0;i<this._callbacks.length;++i)this._callbacks[i](res)}this._callbacks=[],this._errCallbacks=[]},Operation.prototype.then=function(cb,errCb){return 1===this._resolved?void(cb&&cb(this._result)):2===this._resolved?void(errCb&&errCb(this._result)):(cb&&(this._callbacks[this._callbacks.length]=cb),errCb&&(this._errCallbacks[this._errCallbacks.length]=errCb),this)};var defaults={evalPath:isNode?__dirname+"/eval.js":null,maxWorkers:isNode?require("os").cpus().length:navigator.hardwareConcurrency||4,synchronous:!0,env:{},envNamespace:"env"};Parallel.isSupported=function(){return _supports},Parallel.prototype.getWorkerSource=function(cb,env){var preStr="",i=0;for(isNode||0===this.requiredScripts.length||(preStr+='importScripts("'+this.requiredScripts.join('","')+'");\r\n'),i=0;i<this.requiredFunctions.length;++i)preStr+=this.requiredFunctions[i].name?"var "+this.requiredFunctions[i].name+" = "+this.requiredFunctions[i].fn.toString()+";":this.requiredFunctions[i].fn.toString();env=JSON.stringify(env||{});var ns=this.options.envNamespace;return isNode?preStr+'process.on("message", function(e) {global.'+ns+" = "+env+";process.send(JSON.stringify(("+cb.toString()+")(JSON.parse(e).data)))})":preStr+"self.onmessage = function(e) {var global = {}; global."+ns+" = "+env+";self.postMessage(("+cb.toString()+")(e.data))}"},Parallel.prototype.require=function(){for(var func,args=Array.prototype.slice.call(arguments,0),i=0;i<args.length;i++)func=args[i],"string"==typeof func?this.requiredScripts.push(func):"function"==typeof func?this.requiredFunctions.push({fn:func}):"object"==typeof func&&this.requiredFunctions.push(func);return this},Parallel.prototype._spawnWorker=function(cb,env){var wrk,src=this.getWorkerSource(cb,env);if(isNode)wrk=new Worker(this.options.evalPath),wrk.postMessage(src);else{if(void 0===Worker)return;try{if(0!==this.requiredScripts.length){if(null===this.options.evalPath)throw new Error("Can't use required scripts without eval.js!");wrk=new Worker(this.options.evalPath),wrk.postMessage(src)}else{if(!URL)throw new Error("Can't create a blob URL in this browser!");var blob=new Blob([src],{type:"text/javascript"}),url=URL.createObjectURL(blob);wrk=new Worker(url)}}catch(e){if(null===this.options.evalPath)throw e;wrk=new Worker(this.options.evalPath),wrk.postMessage(src)}}return wrk},Parallel.prototype.spawn=function(cb,env){var that=this,newOp=new Operation;return env=extend(this.options.env,env||{}),this.operation.then(function(){var wrk=that._spawnWorker(cb,env);if(void 0!==wrk)wrk.onmessage=function(msg){wrk.terminate(),that.data=msg.data,newOp.resolve(null,that.data)},wrk.onerror=function(e){wrk.terminate(),newOp.resolve(e,null)},wrk.postMessage(that.data);else{if(!that.options.synchronous)throw new Error("Workers do not exist and synchronous operation not allowed!");setImmediate(function(){try{that.data=cb(that.data),newOp.resolve(null,that.data)}catch(e){newOp.resolve(e,null)}})}}),this.operation=newOp,this},Parallel.prototype._spawnMapWorker=function(i,cb,done,env,wrk){var that=this;if(wrk||(wrk=that._spawnWorker(cb,env)),void 0!==wrk)wrk.onmessage=function(msg){that.data[i]=msg.data,done(null,wrk)},wrk.onerror=function(e){wrk.terminate(),done(e)},wrk.postMessage(that.data[i]);else{if(!that.options.synchronous)throw new Error("Workers do not exist and synchronous operation not allowed!");setImmediate(function(){that.data[i]=cb(that.data[i]),done()})}},Parallel.prototype.map=function(cb,env){function done(err,wrk){err?newOp.resolve(err,null):++doneOps===that.data.length?(newOp.resolve(null,that.data),wrk&&wrk.terminate()):startedOps<that.data.length?that._spawnMapWorker(startedOps++,cb,done,env,wrk):wrk&&wrk.terminate()}if(env=extend(this.options.env,env||{}),!this.data.length)return this.spawn(cb,env);var that=this,startedOps=0,doneOps=0,newOp=new Operation;return this.operation.then(function(){for(;startedOps-doneOps<that.options.maxWorkers&&startedOps<that.data.length;++startedOps)that._spawnMapWorker(startedOps,cb,done,env)},function(err){newOp.resolve(err,null)}),this.operation=newOp,this},Parallel.prototype._spawnReduceWorker=function(data,cb,done,env,wrk){var that=this;if(wrk||(wrk=that._spawnWorker(cb,env)),void 0!==wrk)wrk.onmessage=function(msg){that.data[that.data.length]=msg.data,done(null,wrk)},wrk.onerror=function(e){wrk.terminate(),done(e,null)},wrk.postMessage(data);else{if(!that.options.synchronous)throw new Error("Workers do not exist and synchronous operation not allowed!");setImmediate(function(){that.data[that.data.length]=cb(data),done()})}},Parallel.prototype.reduce=function(cb,env){function done(err,wrk){--runningWorkers,err?newOp.resolve(err,null):1===that.data.length&&0===runningWorkers?(that.data=that.data[0],newOp.resolve(null,that.data),wrk&&wrk.terminate()):that.data.length>1?(++runningWorkers,that._spawnReduceWorker([that.data[0],that.data[1]],cb,done,env,wrk),that.data.splice(0,2)):wrk&&wrk.terminate()}if(env=extend(this.options.env,env||{}),!this.data.length)throw new Error("Can't reduce non-array data");var runningWorkers=0,that=this,newOp=new Operation;return this.operation.then(function(){if(1===that.data.length)newOp.resolve(null,that.data[0]);else{for(var i=0;i<that.options.maxWorkers&&i<Math.floor(that.data.length/2);++i)++runningWorkers,that._spawnReduceWorker([that.data[2*i],that.data[2*i+1]],cb,done,env);that.data.splice(0,2*i)}}),this.operation=newOp,this},Parallel.prototype.then=function(cb,errCb){var that=this,newOp=new Operation;return errCb="function"==typeof errCb?errCb:function(){},this.operation.then(function(){var retData;try{cb&&(retData=cb(that.data),void 0!==retData&&(that.data=retData)),newOp.resolve(null,that.data)}catch(e){errCb?(retData=errCb(e),void 0!==retData&&(that.data=retData),newOp.resolve(null,that.data)):newOp.resolve(null,e)}},function(err){if(errCb){var retData=errCb(err);void 0!==retData&&(that.data=retData),newOp.resolve(null,that.data)}else newOp.resolve(null,err)}),this.operation=newOp,this},isCommonJS?module.exports=Parallel:self.Parallel=Parallel}()},function(module,exports){"use strict";function configDeepMerge(destObj,srcObj){var ancestorProps=arguments.length>2&&void 0!==arguments[2]?arguments[2]:[];Object.keys(srcObj).forEach(function(propKey){var srcValue=srcObj[propKey],ancestorPropsAndThis=ancestorProps.concat([propKey]);if("object"===("undefined"==typeof srcValue?"undefined":_typeof(srcValue))){if("undefined"!=typeof destObj[propKey]&&"object"!==_typeof(destObj[propKey]))throw new Error("Expected config property not to be an object: "+ancestorPropsAndThis.join("."));configDeepMerge(destObj[propKey],srcValue,ancestorPropsAndThis)}else{if("object"===_typeof(destObj[propKey]))throw new Error("Expected config property to be an object: "+ancestorPropsAndThis.join("."));destObj[propKey]=srcValue}})}function getConfig(){return config.get()}function setConfig(){return config.set.apply(config,arguments)}exports.__esModule=!0;var _typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(obj){return typeof obj}:function(obj){return obj&&"function"==typeof Symbol&&obj.constructor===Symbol&&obj!==Symbol.prototype?"symbol":typeof obj};exports.getConfig=getConfig,exports.setConfig=setConfig;var configuration={basepath:{node:"",web:""},fallback:{slaveScriptUrl:""}},config={get:function(){return configuration},set:function(newConfig){if("object"!==("undefined"==typeof newConfig?"undefined":_typeof(newConfig)))throw new Error("Expected config object.");configDeepMerge(configuration,newConfig)}};exports.default=config},function(module,exports,__webpack_require__){
(function(setImmediate,clearImmediate){function Timeout(id,clearFn){this._id=id,this._clearFn=clearFn}var nextTick=__webpack_require__(4).nextTick,apply=Function.prototype.apply,slice=Array.prototype.slice,immediateIds={},nextImmediateId=0;exports.setTimeout=function(){return new Timeout(apply.call(setTimeout,window,arguments),clearTimeout)},exports.setInterval=function(){return new Timeout(apply.call(setInterval,window,arguments),clearInterval)},exports.clearTimeout=exports.clearInterval=function(timeout){timeout.close()},Timeout.prototype.unref=Timeout.prototype.ref=function(){},Timeout.prototype.close=function(){this._clearFn.call(window,this._id)},exports.enroll=function(item,msecs){clearTimeout(item._idleTimeoutId),item._idleTimeout=msecs},exports.unenroll=function(item){clearTimeout(item._idleTimeoutId),item._idleTimeout=-1},exports._unrefActive=exports.active=function(item){clearTimeout(item._idleTimeoutId);var msecs=item._idleTimeout;msecs>=0&&(item._idleTimeoutId=setTimeout(function(){item._onTimeout&&item._onTimeout()},msecs))},exports.setImmediate="function"==typeof setImmediate?setImmediate:function(fn){var id=nextImmediateId++,args=!(arguments.length<2)&&slice.call(arguments,1);return immediateIds[id]=!0,nextTick(function(){immediateIds[id]&&(args?fn.apply(null,args):fn.call(null),exports.clearImmediate(id))}),id},exports.clearImmediate="function"==typeof clearImmediate?clearImmediate:function(id){delete immediateIds[id]}}).call(exports,__webpack_require__(14).setImmediate,__webpack_require__(14).clearImmediate)},function(module,exports,__webpack_require__){"use strict";function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}function spawn(){var runnable=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null,importScripts=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[];return new _worker2.default(runnable,importScripts)}exports.__esModule=!0,exports.Pool=exports.defaults=exports.config=void 0,exports.spawn=spawn,__webpack_require__(30);var _config=__webpack_require__(13),_config2=_interopRequireDefault(_config),_defaults=__webpack_require__(16),_defaults2=_interopRequireDefault(_defaults),_pool=__webpack_require__(35),_pool2=_interopRequireDefault(_pool),_worker=__webpack_require__(39),_worker2=_interopRequireDefault(_worker);exports.config=_config2.default,exports.defaults=_defaults2.default,exports.Pool=_pool2.default,exports.default={config:_config2.default,defaults:_defaults2.default,Pool:_pool2.default,spawn:spawn,Worker:_worker2.default}},function(module,exports,__webpack_require__){"use strict";(function(process){"undefined"!=typeof process&&"pid"in process?module.exports=__webpack_require__(33):module.exports=__webpack_require__(32)}).call(exports,__webpack_require__(4))},,function(module,exports,__webpack_require__){"use strict";function knightTours(){var moves=[{x:-2,y:-1},{x:-2,y:1},{x:-1,y:-2},{x:-1,y:2},{x:1,y:-2},{x:1,y:2},{x:2,y:-1},{x:2,y:1}],boardSize=this.params.boardSize,numberOfFields=boardSize*boardSize,board=new Array(boardSize*boardSize);board.fill(0);for(var results=0,i=0;i<this.params.array.length;++i){for(var startPath=this.params.array[i],stack=startPath.map(function(pos,index){return{coordinate:pos,n:index+1}}),index=0;index<startPath.length-1;++index){var fieldIndex=startPath[index].x*boardSize+startPath[index].y;board[fieldIndex]=index+1}for(;stack.length>0;){var _stack=stack[stack.length-1],coordinate=_stack.coordinate,n=_stack.n,_fieldIndex=coordinate.x*boardSize+coordinate.y;if(0===board[_fieldIndex])if(n!==numberOfFields){board[_fieldIndex]=n;for(var _i=0;_i<moves.length;++_i){var move=moves[_i],successor={x:coordinate.x+move.x,y:coordinate.y+move.y},accessible=successor.x>=0&&successor.y>=0&&successor.x<boardSize&&successor.y<boardSize&&0===board[successor.x*boardSize+successor.y];accessible&&stack.push({coordinate:successor,n:n+1})}}else++results,stack.pop();else board[_fieldIndex]=0,stack.pop()}}this.rtn.data.push(results)}function computeTours(start,boardSize){function successors(coordinate){for(var moves=[{x:-2,y:-1},{x:-2,y:1},{x:-1,y:-2},{x:-1,y:2},{x:1,y:-2},{x:1,y:2},{x:2,y:-1},{x:2,y:1}],result=[],i=0;i<moves.length;++i){var move=moves[i],successor={x:coordinate.x+move.x,y:coordinate.y+move.y},accessible=successor.x>=0&&successor.y>=0&&successor.x<boardSize&&successor.y<boardSize&&(successor.x!==start.x||successor.y!==start.y)&&successor.x!==coordinate.x&&successor.y!==coordinate.y;accessible&&result.push(successor)}return result}function computeStartFields(){for(var result=[],_iterator=successors(start),_isArray=Array.isArray(_iterator),_i2=0,_iterator=_isArray?_iterator:_iterator[Symbol.iterator]();;){var _ref;if(_isArray){if(_i2>=_iterator.length)break;_ref=_iterator[_i2++]}else{if(_i2=_iterator.next(),_i2.done)break;_ref=_i2.value}for(var directSuccessor=_ref,_iterator2=successors(directSuccessor),_isArray2=Array.isArray(_iterator2),_i3=0,_iterator2=_isArray2?_iterator2:_iterator2[Symbol.iterator]();;){var _ref2;if(_isArray2){if(_i3>=_iterator2.length)break;_ref2=_iterator2[_i3++]}else{if(_i3=_iterator2.next(),_i3.done)break;_ref2=_i3.value}var indirectSuccessor=_ref2;result.push([start,directSuccessor,indirectSuccessor])}}return result}var resolve=void 0,reject=void 0,promise=new Promise(function(res,rej){resolve=res,reject=rej}),startFields=computeStartFields(),params={array:startFields,boardSize:boardSize};return __WEBPACK_IMPORTED_MODULE_0_Hamsters_js__.hamsters.run(params,knightTours,function(result){return resolve(result)},__WEBPACK_IMPORTED_MODULE_0_Hamsters_js__.hamsters.maxThreads,!0),promise}function aggregateTours(results){var resolve=void 0,reject=void 0,promise=new Promise(function(res,rej){resolve=res,reject=rej});return __WEBPACK_IMPORTED_MODULE_0_Hamsters_js__.hamsters.run({array:results},function(){var result=this.params.array.reduce(function(memo,value){return memo+value},0);this.rtn.data.push(result)},function(results){resolve(results[0])},1,!0),promise}function parallelKnightTours(start,boardSize){return computeTours(start,boardSize).then(aggregateTours)}var __WEBPACK_IMPORTED_MODULE_0_Hamsters_js__=__webpack_require__(11);__webpack_require__.n(__WEBPACK_IMPORTED_MODULE_0_Hamsters_js__);exports.a=parallelKnightTours},function(module,exports,__webpack_require__){"use strict";function computeMandelbrotLine(){function calculateZ(c){for(var z={i:c.i,real:c.real},n=0;n<options.iterations&&!(Math.pow(z.real,2)+Math.pow(z.i,2)>4);++n){var zI=z.i;z.i=2*z.real*z.i+c.i,z.real=Math.pow(z.real,2)-Math.pow(zI,2)+c.real}return n}for(var options=this.params.options,array=this.params.array,i=0;i<array.length;++i){for(var y=array[i],line=new Uint8ClampedArray(4*options.imageWidth),cI=options.max.i-y*options.scalingFactor.i,x=0;x<options.imageWidth;++x){var c={i:cI,real:options.min.real+x*options.scalingFactor.real},n=calculateZ(c),base=4*x;line[base]=255&n,line[base+1]=65280&n,line[base+2]=16711680&n,line[base+3]=255}this.rtn.data.push(line)}}function mandelbrot(options){var resolve=void 0,reject=void 0,promise=new Promise(function(res,rej){resolve=res,reject=rej}),range=__WEBPACK_IMPORTED_MODULE_1_lodash__.range(options.imageHeight),params={array:range,options:options};return __WEBPACK_IMPORTED_MODULE_0_Hamsters_js__.hamsters.run(params,computeMandelbrotLine,function(result){return resolve(result)},__WEBPACK_IMPORTED_MODULE_0_Hamsters_js__.hamsters.maxThreads,!0),promise}var __WEBPACK_IMPORTED_MODULE_0_Hamsters_js__=__webpack_require__(11),__WEBPACK_IMPORTED_MODULE_1_lodash__=(__webpack_require__.n(__WEBPACK_IMPORTED_MODULE_0_Hamsters_js__),__webpack_require__(2));__webpack_require__.n(__WEBPACK_IMPORTED_MODULE_1_lodash__);exports.a=mandelbrot},function(module,exports,__webpack_require__){"use strict";function initializeOptions(options){return Object.assign({},{investmentAmount:1e6,liquidity:1e4,numRuns:1e4,numYears:10,performance:0,projects:[],seed:void 0,volatility:.01},options)}function runSimulation(){function createMonteCarloEnvironment(options){function simulateOutcomes(cashFlows,numYears){function toAbsoluteIndices(indices){for(var currentPortfolioValue=options.investmentAmount,previousYearIndex=100,relativeYear=0;relativeYear<indices.length;++relativeYear){var currentYearIndex=indices[relativeYear],cashFlowStartOfYear=0===relativeYear?0:cashFlows[relativeYear-1],performance=currentYearIndex/previousYearIndex;currentPortfolioValue=(currentPortfolioValue+cashFlowStartOfYear)*performance,indices[relativeYear]=Math.round(currentPortfolioValue),previousYearIndex=currentYearIndex}return indices}for(var result=new Array(options.numYears),year=0;year<=numYears;++year)result[year]=new Array(options.numRuns);for(var run=0;run<options.numRuns;run++){for(var indices=[100],i=1;i<=numYears;i++){var randomPerformance=1+Math.random();indices.push(indices[i-1]*randomPerformance)}toAbsoluteIndices(indices);for(var _year=0;_year<indices.length;++_year)result[_year][run]=indices[_year]}return result}function projectsToCashFlows(){for(var cashFlows=[],year=0;year<options.numYears;++year){var projectsByThisYear=projectsByStartYear[year]||[],cashFlow=-projectsByThisYear.reduce(function(memo,project){return memo+project.totalAmount},0);cashFlows.push(cashFlow)}return cashFlows}function calculateNoInterestReferenceLine(cashFlows){for(var noInterestReferenceLine=[],investmentAmountLeft=options.investmentAmount,year=0;year<options.numYears;++year)investmentAmountLeft+=cashFlows[year],noInterestReferenceLine.push(investmentAmountLeft);return noInterestReferenceLine}var projectsToSimulate=options.projects;options.taskIndex&&options.valuesPerWorker&&(projectsToSimulate=options.projects.slice(options.taskIndex*options.valuesPerWorker,(options.taskIndex+1)*options.valuesPerWorker));for(var projects=options.projects.sort(function(a,b){return a.startYear-b.startYear}),projectsByStartYear={},_iterator=projects,_isArray=Array.isArray(_iterator),_i=0,_iterator=_isArray?_iterator:_iterator[Symbol.iterator]();;){var _ref;if(_isArray){if(_i>=_iterator.length)break;_ref=_iterator[_i++]}else{if(_i=_iterator.next(),_i.done)break;_ref=_i.value}var project=_ref,arr=projectsByStartYear[project.startYear]=projectsByStartYear[project.startYear]||[];arr.push(project)}var cashFlows=projectsToCashFlows(),noInterestReferenceLine=calculateNoInterestReferenceLine(cashFlows),numYears=projectsToSimulate.reduce(function(memo,project){return Math.max(memo,project.startYear)},0);return{investmentAmount:options.investmentAmount,liquidity:options.liquidity,noInterestReferenceLine:noInterestReferenceLine,numRuns:options.numRuns,numYears:numYears,projectsByStartYear:projectsByStartYear,simulatedValues:simulateOutcomes(cashFlows,numYears)}}function calculateProject(project,environment){function groupForValue(value,groups){return groups.find(function(group){return("undefined"==typeof group.from||group.from<=value)&&("undefined"==typeof group.to||group.to>value)})}function createGroups(requiredAmount,noInterestReference){return[{description:"Ziel erreichbar",from:requiredAmount,name:"green",percentage:0,separator:!0},{description:"mit Zusatzliquidität erreichbar",from:requiredAmount-environment.liquidity,name:"yellow",percentage:0,separator:!0,to:requiredAmount},{description:"nicht erreichbar",from:noInterestReference,name:"gray",percentage:0,separator:!1,to:requiredAmount-environment.liquidity},{description:"nicht erreichbar, mit Verlust",name:"red",percentage:0,separator:!1,to:noInterestReference}]}function calculateRequiredAmount(){for(var amount=project.totalAmount,projectsSameYear=environment.projectsByStartYear[project.startYear],_iterator2=projectsSameYear,_isArray2=Array.isArray(_iterator2),_i2=0,_iterator2=_isArray2?_iterator2:_iterator2[Symbol.iterator]();;){var _ref2;if(_isArray2){if(_i2>=_iterator2.length)break;_ref2=_iterator2[_i2++]}else{if(_i2=_iterator2.next(),_i2.done)break;_ref2=_i2.value}var otherProject=_ref2;if(otherProject===project)break;amount+=otherProject.totalAmount}return amount}function median(values){var half=Math.floor(values.length/2);return values.length%2?values[half]:(values[half-1]+values[half])/2}var NUMBER_OF_BUCKETS=10,requiredAmount=calculateRequiredAmount(),simulatedValuesThisYear=environment.simulatedValues[project.startYear];simulatedValuesThisYear.sort(function(a,b){return a-b});for(var groups=createGroups(requiredAmount,environment.noInterestReferenceLine[project.startYear]),valuesByGroup={},bucketSize=Math.round(simulatedValuesThisYear.length/NUMBER_OF_BUCKETS),buckets=[],i=0;i<simulatedValuesThisYear.length;i+=bucketSize){for(var bucket={max:Number.MIN_VALUE,min:Number.MAX_VALUE,subBuckets:{}},j=i;j<i+bucketSize;++j){var value=simulatedValuesThisYear[j];bucket.min=Math.min(bucket.min,value),bucket.max=Math.max(bucket.max,value);var group=groupForValue(simulatedValuesThisYear[j],groups);valuesByGroup[group.name]=(valuesByGroup[group.name]||0)+1;var subBucket=bucket.subBuckets[group.name]=bucket.subBuckets[group.name]||{group:group.name,max:Number.MIN_VALUE,min:Number.MAX_VALUE};subBucket.min=Math.min(subBucket.min,value),subBucket.max=Math.max(subBucket.max,value)}buckets.push(bucket)}var nonEmptyGroups=groups.filter(function(group){return!!valuesByGroup[group.name]});nonEmptyGroups.forEach(function(group){return group.percentage=valuesByGroup[group.name]/simulatedValuesThisYear.length});var oneSixth=Math.round(simulatedValuesThisYear.length/6);return{buckets:buckets,groups:nonEmptyGroups,max:simulatedValuesThisYear[simulatedValuesThisYear.length-1],median:median(simulatedValuesThisYear),min:simulatedValuesThisYear[0],project:project,twoThird:{max:simulatedValuesThisYear[simulatedValuesThisYear.length-oneSixth],min:simulatedValuesThisYear[oneSixth]}}}for(var environment=createMonteCarloEnvironment(this.params.options),i=0;i<this.params.array.length;++i){var project=this.params.array[i];this.rtn.data.push(calculateProject(project,environment))}}function parallelMonteCarlo(userOptions){var options=initializeOptions(userOptions),resolve=void 0,reject=void 0,promise=new Promise(function(res,rej){resolve=res,reject=rej});return __WEBPACK_IMPORTED_MODULE_0_Hamsters_js__.hamsters.run({array:options.projects,options:options},runSimulation,function(result){return resolve(result)},__WEBPACK_IMPORTED_MODULE_0_Hamsters_js__.hamsters.maxThreads,!0),promise}var __WEBPACK_IMPORTED_MODULE_0_Hamsters_js__=__webpack_require__(11);__webpack_require__.n(__WEBPACK_IMPORTED_MODULE_0_Hamsters_js__);exports.a=parallelMonteCarlo},function(module,exports,__webpack_require__){"use strict";(function(global){function knightTours(startPath,boardSize){var moves=[{x:-2,y:-1},{x:-2,y:1},{x:-1,y:-2},{x:-1,y:2},{x:1,y:-2},{x:1,y:2},{x:2,y:-1},{x:2,y:1}],board=new Array(boardSize*boardSize);board.fill(0);for(var numberOfFields=boardSize*boardSize,results=0,stack=startPath.map(function(pos,index){return{coordinate:pos,n:index+1}}),index=0;index<startPath.length-1;++index){var fieldIndex=startPath[index].x*boardSize+startPath[index].y;board[fieldIndex]=index+1}for(;stack.length>0;){var _stack=stack[stack.length-1],coordinate=_stack.coordinate,n=_stack.n,_fieldIndex=coordinate.x*boardSize+coordinate.y;if(0===board[_fieldIndex])if(n!==numberOfFields){board[_fieldIndex]=n;for(var i=0;i<moves.length;++i){var move=moves[i],successor={x:coordinate.x+move.x,y:coordinate.y+move.y},accessible=successor.x>=0&&successor.y>=0&&successor.x<boardSize&&successor.y<boardSize&&0===board[successor.x*boardSize+successor.y];accessible&&stack.push({coordinate:successor,n:n+1})}}else++results,stack.pop();else board[_fieldIndex]=0,stack.pop()}return results}function parallelJSKnightTours(start,boardSize){function successors(coordinate){for(var moves=[{x:-2,y:-1},{x:-2,y:1},{x:-1,y:-2},{x:-1,y:2},{x:1,y:-2},{x:1,y:2},{x:2,y:-1},{x:2,y:1}],result=[],i=0;i<moves.length;++i){var move=moves[i],successor={x:coordinate.x+move.x,y:coordinate.y+move.y},accessible=successor.x>=0&&successor.y>=0&&successor.x<boardSize&&successor.y<boardSize&&(successor.x!==start.x||successor.y!==start.y)&&successor.x!==coordinate.x&&successor.y!==coordinate.y;accessible&&result.push(successor)}return result}function computeStartFields(){for(var result=[],_iterator=successors(start),_isArray=Array.isArray(_iterator),_i=0,_iterator=_isArray?_iterator:_iterator[Symbol.iterator]();;){var _ref;if(_isArray){if(_i>=_iterator.length)break;_ref=_iterator[_i++]}else{if(_i=_iterator.next(),_i.done)break;_ref=_i.value}for(var directSuccessor=_ref,_iterator2=successors(directSuccessor),_isArray2=Array.isArray(_iterator2),_i2=0,_iterator2=_isArray2?_iterator2:_iterator2[Symbol.iterator]();;){var _ref2;if(_isArray2){if(_i2>=_iterator2.length)break;_ref2=_iterator2[_i2++]}else{if(_i2=_iterator2.next(),_i2.done)break;_ref2=_i2.value}var indirectSuccessor=_ref2;result.push([start,directSuccessor,indirectSuccessor])}}return result}return new Parallel(computeStartFields(),{env:{boardSize:boardSize}}).require(knightTours).map(function(startField){return knightTours(startField,global.env.boardSize)}).reduce(function(toursPerRun){return toursPerRun.reduce(function(memo,current){return memo+current},0)})}exports.a=parallelJSKnightTours;var Parallel=__webpack_require__(12)}).call(exports,__webpack_require__(0))},function(module,exports,__webpack_require__){"use strict";(function(global){function computeMandelbrotLine(y,options){function calculateZ(c){for(var z={i:c.i,real:c.real},n=0;n<options.iterations&&!(Math.pow(z.real,2)+Math.pow(z.i,2)>4);++n){var zI=z.i;z.i=2*z.real*z.i+c.i,z.real=Math.pow(z.real,2)-Math.pow(zI,2)+c.real}return n}for(var line=new Uint8ClampedArray(4*options.imageWidth),cI=options.max.i-y*options.scalingFactor.i,x=0;x<options.imageWidth;++x){var c={i:cI,real:options.min.real+x*options.scalingFactor.real},n=calculateZ(c),base=4*x;line[base]=255&n,line[base+1]=65280&n,line[base+2]=16711680&n,line[base+3]=255}return line}function parallelJSMandelbrot(mandelbrotOptions){var lines=__WEBPACK_IMPORTED_MODULE_0_lodash__.range(mandelbrotOptions.imageHeight);return new Parallel(lines,{env:mandelbrotOptions}).require(computeMandelbrotLine).map(function(line){return computeMandelbrotLine(line,global.env)})}var __WEBPACK_IMPORTED_MODULE_0_lodash__=__webpack_require__(2);__webpack_require__.n(__WEBPACK_IMPORTED_MODULE_0_lodash__);exports.a=parallelJSMandelbrot;var Parallel=__webpack_require__(12)}).call(exports,__webpack_require__(0))},function(module,exports,__webpack_require__){"use strict";(function(global){function initializeOptions(options){return Object.assign({},{investmentAmount:1e6,liquidity:1e4,numRuns:1e4,numYears:10,performance:0,projects:[],seed:void 0,volatility:.01},options)}function createMonteCarloEnvironment(options){function simulateOutcomes(cashFlows,numYears){function toAbsoluteIndices(indices){for(var currentPortfolioValue=options.investmentAmount,previousYearIndex=100,relativeYear=0;relativeYear<indices.length;++relativeYear){var currentYearIndex=indices[relativeYear],cashFlowStartOfYear=0===relativeYear?0:cashFlows[relativeYear-1],performance=currentYearIndex/previousYearIndex;currentPortfolioValue=(currentPortfolioValue+cashFlowStartOfYear)*performance,indices[relativeYear]=1+random.normal(performance,options.volatility),previousYearIndex=currentYearIndex}return indices}for(var result=new Array(options.numYears),year=0;year<=numYears;++year)result[year]=new Array(options.numRuns);for(var run=0;run<options.numRuns;run++){for(var indices=[100],i=1;i<=numYears;i++){var randomPerformance=1+Math.random();indices.push(indices[i-1]*randomPerformance)}toAbsoluteIndices(indices);for(var _year=0;_year<indices.length;++_year)result[_year][run]=indices[_year]}return result}function projectsToCashFlows(){for(var cashFlows=[],year=0;year<options.numYears;++year){var projectsByThisYear=projectsByStartYear[year]||[],cashFlow=-projectsByThisYear.reduce(function(memo,project){return memo+project.totalAmount},0);cashFlows.push(cashFlow)}return cashFlows}function calculateNoInterestReferenceLine(cashFlows){for(var noInterestReferenceLine=[],investmentAmountLeft=options.investmentAmount,year=0;year<options.numYears;++year)investmentAmountLeft+=cashFlows[year],noInterestReferenceLine.push(investmentAmountLeft);return noInterestReferenceLine}var random=new self.Random(10),projectsToSimulate=options.projects;options.taskIndex&&options.valuesPerWorker&&(projectsToSimulate=options.projects.slice(options.taskIndex*options.valuesPerWorker,(options.taskIndex+1)*options.valuesPerWorker));for(var projects=options.projects.sort(function(a,b){return a.startYear-b.startYear}),projectsByStartYear={},_iterator=projects,_isArray=Array.isArray(_iterator),_i=0,_iterator=_isArray?_iterator:_iterator[Symbol.iterator]();;){var _ref;if(_isArray){if(_i>=_iterator.length)break;_ref=_iterator[_i++]}else{if(_i=_iterator.next(),_i.done)break;_ref=_i.value}var project=_ref,arr=projectsByStartYear[project.startYear]=projectsByStartYear[project.startYear]||[];arr.push(project)}var cashFlows=projectsToCashFlows(),noInterestReferenceLine=calculateNoInterestReferenceLine(cashFlows),numYears=projectsToSimulate.reduce(function(memo,project){return Math.max(memo,project.startYear)},0);return{investmentAmount:options.investmentAmount,liquidity:options.liquidity,noInterestReferenceLine:noInterestReferenceLine,numRuns:options.numRuns,numYears:numYears,projectsByStartYear:projectsByStartYear,simulatedValues:simulateOutcomes(cashFlows,numYears)}}function calculateProject(project,environment){function groupForValue(value,groups){return groups.find(function(group){return("undefined"==typeof group.from||group.from<=value)&&("undefined"==typeof group.to||group.to>value)})}function createGroups(requiredAmount,noInterestReference){return[{description:"Ziel erreichbar",from:requiredAmount,name:"green",percentage:0,separator:!0},{description:"mit Zusatzliquidität erreichbar",from:requiredAmount-environment.liquidity,name:"yellow",percentage:0,separator:!0,to:requiredAmount},{description:"nicht erreichbar",from:noInterestReference,name:"gray",percentage:0,separator:!1,to:requiredAmount-environment.liquidity},{description:"nicht erreichbar, mit Verlust",name:"red",percentage:0,separator:!1,to:noInterestReference}]}function calculateRequiredAmount(){for(var amount=project.totalAmount,projectsSameYear=environment.projectsByStartYear[project.startYear],_iterator2=projectsSameYear,_isArray2=Array.isArray(_iterator2),_i2=0,_iterator2=_isArray2?_iterator2:_iterator2[Symbol.iterator]();;){var _ref2;if(_isArray2){if(_i2>=_iterator2.length)break;_ref2=_iterator2[_i2++]}else{if(_i2=_iterator2.next(),_i2.done)break;_ref2=_i2.value}var otherProject=_ref2;if(otherProject===project)break;amount+=otherProject.totalAmount}return amount}function median(values){var half=Math.floor(values.length/2);return values.length%2?values[half]:(values[half-1]+values[half])/2}var NUMBER_OF_BUCKETS=10,requiredAmount=calculateRequiredAmount(),simulatedValuesThisYear=environment.simulatedValues[project.startYear];simulatedValuesThisYear.sort(function(a,b){return a-b});for(var groups=createGroups(requiredAmount,environment.noInterestReferenceLine[project.startYear]),valuesByGroup={},bucketSize=Math.round(simulatedValuesThisYear.length/NUMBER_OF_BUCKETS),buckets=[],i=0;i<simulatedValuesThisYear.length;i+=bucketSize){for(var bucket={max:Number.MIN_VALUE,min:Number.MAX_VALUE,subBuckets:{}},j=i;j<i+bucketSize;++j){var value=simulatedValuesThisYear[j];bucket.min=Math.min(bucket.min,value),bucket.max=Math.max(bucket.max,value);var group=groupForValue(simulatedValuesThisYear[j],groups);valuesByGroup[group.name]=(valuesByGroup[group.name]||0)+1;var subBucket=bucket.subBuckets[group.name]=bucket.subBuckets[group.name]||{group:group.name,max:Number.MIN_VALUE,min:Number.MAX_VALUE};subBucket.min=Math.min(subBucket.min,value),subBucket.max=Math.max(subBucket.max,value)}buckets.push(bucket)}var nonEmptyGroups=groups.filter(function(group){return!!valuesByGroup[group.name]});nonEmptyGroups.forEach(function(group){return group.percentage=valuesByGroup[group.name]/simulatedValuesThisYear.length});var oneSixth=Math.round(simulatedValuesThisYear.length/6);return{buckets:buckets,groups:nonEmptyGroups,max:simulatedValuesThisYear[simulatedValuesThisYear.length-1],median:median(simulatedValuesThisYear),min:simulatedValuesThisYear[0],project:project,twoThird:{max:simulatedValuesThisYear[simulatedValuesThisYear.length-oneSixth],min:simulatedValuesThisYear[oneSixth]}}}function parallelJSMonteCarlo(userOptions){var options=initializeOptions(userOptions);return new Parallel(options.projects.slice(),{evalPath:"./"+__webpack_require__(29),env:{options:options},envNamespace:"simulation"}).require("https://raw.githubusercontent.com/mvarshney/simjs-source/master/src/random.js").require(createMonteCarloEnvironment).require(calculateProject).map(function(project){return global.simulation.env=global.simulation.env||createMonteCarloEnvironment(global.simulation.options),calculateProject(project,global.simulation.env)})}exports.a=parallelJSMonteCarlo;var Parallel=__webpack_require__(12)}).call(exports,__webpack_require__(0))},function(module,exports,__webpack_require__){"use strict";function knightTours(_ref,done){var startPath=_ref.startPath,boardSize=_ref.boardSize,moves=[{x:-2,y:-1},{x:-2,y:1},{x:-1,y:-2},{x:-1,y:2},{x:1,y:-2},{x:1,y:2},{x:2,y:-1},{x:2,y:1}],board=new Array(boardSize*boardSize);board.fill(0);for(var numberOfFields=boardSize*boardSize,results=0,stack=startPath.map(function(pos,index){return{coordinate:pos,n:index+1}}),index=0;index<startPath.length-1;++index){var fieldIndex=startPath[index].x*boardSize+startPath[index].y;board[fieldIndex]=index+1}for(;stack.length>0;){var _stack=stack[stack.length-1],coordinate=_stack.coordinate,n=_stack.n,_fieldIndex=coordinate.x*boardSize+coordinate.y;if(0===board[_fieldIndex])if(n!==numberOfFields){board[_fieldIndex]=n;for(var i=0;i<moves.length;++i){var move=moves[i],successor={x:coordinate.x+move.x,y:coordinate.y+move.y},accessible=successor.x>=0&&successor.y>=0&&successor.x<boardSize&&successor.y<boardSize&&0===board[successor.x*boardSize+successor.y];accessible&&stack.push({coordinate:successor,n:n+1})}}else++results,stack.pop();else board[_fieldIndex]=0,stack.pop()}done(results)}function threadsKnightTours(start,boardSize,pool){function successors(coordinate){for(var moves=[{x:-2,y:-1},{x:-2,y:1},{x:-1,y:-2},{x:-1,y:2},{x:1,y:-2},{x:1,y:2},{x:2,y:-1},{x:2,y:1}],result=[],i=0;i<moves.length;++i){var move=moves[i],successor={x:coordinate.x+move.x,y:coordinate.y+move.y},accessible=successor.x>=0&&successor.y>=0&&successor.x<boardSize&&successor.y<boardSize&&(successor.x!==start.x||successor.y!==start.y)&&successor.x!==coordinate.x&&successor.y!==coordinate.y;accessible&&result.push(successor)}return result}function computeStartFields(){for(var result=[],_iterator=successors(start),_isArray=Array.isArray(_iterator),_i=0,_iterator=_isArray?_iterator:_iterator[Symbol.iterator]();;){var _ref2;if(_isArray){if(_i>=_iterator.length)break;_ref2=_iterator[_i++]}else{if(_i=_iterator.next(),_i.done)break;_ref2=_i.value}for(var directSuccessor=_ref2,_iterator2=successors(directSuccessor),_isArray2=Array.isArray(_iterator2),_i2=0,_iterator2=_isArray2?_iterator2:_iterator2[Symbol.iterator]();;){var _ref3;if(_isArray2){if(_i2>=_iterator2.length)break;_ref3=_iterator2[_i2++]}else{if(_i2=_iterator2.next(),_i2.done)break;_ref3=_i2.value}var indirectSuccessor=_ref3;result.push([start,directSuccessor,indirectSuccessor])}}return result}var resolve=void 0,reject=void 0,promise=new Promise(function(_resolve,_reject){resolve=_resolve,reject=_reject}),totalTours=0;pool.run(knightTours).on("done",function(job,tours){return totalTours+=tours}).on("finished",function(){resolve(totalTours)});for(var _iterator3=computeStartFields(),_isArray3=Array.isArray(_iterator3),_i3=0,_iterator3=_isArray3?_iterator3:_iterator3[Symbol.iterator]();;){var _ref4;if(_isArray3){if(_i3>=_iterator3.length)break;_ref4=_iterator3[_i3++]}else{if(_i3=_iterator3.next(),_i3.done)break;_ref4=_i3.value}var startPath=_ref4;pool.send({startPath:startPath,boardSize:boardSize})}return promise}exports.a=threadsKnightTours},function(module,exports,__webpack_require__){"use strict";function computeMandelbrotLine(_ref,done){function calculateZ(c){for(var z={i:c.i,real:c.real},n=0;n<options.iterations&&!(Math.pow(z.real,2)+Math.pow(z.i,2)>4);++n){var zI=z.i;z.i=2*z.real*z.i+c.i,z.real=Math.pow(z.real,2)-Math.pow(zI,2)+c.real}return n}for(var y=_ref.y,options=_ref.options,line=new Uint8ClampedArray(4*options.imageWidth),cI=options.max.i-y*options.scalingFactor.i,x=0;x<options.imageWidth;++x){var c={i:cI,real:options.min.real+x*options.scalingFactor.real},n=calculateZ(c),base=4*x;line[base]=255&n,line[base+1]=65280&n,line[base+2]=16711680&n,line[base+3]=255}done.transfer(line,[line.buffer])}function threadsMandelbrot(mandelbrotOptions,pool){var promises=[];pool.run(computeMandelbrotLine);for(var lines=__WEBPACK_IMPORTED_MODULE_0_lodash__.range(mandelbrotOptions.imageHeight),_iterator=lines,_isArray=Array.isArray(_iterator),_i=0,_iterator=_isArray?_iterator:_iterator[Symbol.iterator]();;){var _ref2;if(_isArray){if(_i>=_iterator.length)break;_ref2=_iterator[_i++]}else{if(_i=_iterator.next(),_i.done)break;_ref2=_i.value}var line=_ref2;promises.push(pool.send({y:line,options:mandelbrotOptions}).promise())}return Promise.all(promises)}var __WEBPACK_IMPORTED_MODULE_0_lodash__=__webpack_require__(2);__webpack_require__.n(__WEBPACK_IMPORTED_MODULE_0_lodash__);exports.a=threadsMandelbrot},function(module,exports,__webpack_require__){"use strict";function initializeOptions(options){return Object.assign({},{investmentAmount:1e6,liquidity:1e4,numRuns:1e4,numYears:10,performance:0,projects:[],seed:void 0,volatility:.01},options)}function calculateProject(_ref,done){function createMonteCarloEnvironment(options){function simulateOutcomes(cashFlows,numYears){function toAbsoluteIndices(indices){for(var currentPortfolioValue=options.investmentAmount,previousYearIndex=100,relativeYear=0;relativeYear<indices.length;++relativeYear){var currentYearIndex=indices[relativeYear],cashFlowStartOfYear=0===relativeYear?0:cashFlows[relativeYear-1],performance=currentYearIndex/previousYearIndex;currentPortfolioValue=(currentPortfolioValue+cashFlowStartOfYear)*performance,indices[relativeYear]=1+random.normal(performance,options.volatility),previousYearIndex=currentYearIndex}return indices}for(var result=new Array(options.numYears),year=0;year<=numYears;++year)result[year]=new Array(options.numRuns);for(var run=0;run<options.numRuns;run++){for(var indices=[100],i=1;i<=numYears;i++){var randomPerformance=1+Math.random();indices.push(indices[i-1]*randomPerformance)}toAbsoluteIndices(indices);for(var _year=0;_year<indices.length;++_year)result[_year][run]=indices[_year]}return result}function projectsToCashFlows(){for(var cashFlows=[],year=0;year<options.numYears;++year){var projectsByThisYear=projectsByStartYear[year]||[],cashFlow=-projectsByThisYear.reduce(function(memo,project){return memo+project.totalAmount},0);cashFlows.push(cashFlow)}return cashFlows}function calculateNoInterestReferenceLine(cashFlows){for(var noInterestReferenceLine=[],investmentAmountLeft=options.investmentAmount,year=0;year<options.numYears;++year)investmentAmountLeft+=cashFlows[year],noInterestReferenceLine.push(investmentAmountLeft);return noInterestReferenceLine}var random=new self.Random(10),projectsToSimulate=options.projects;options.taskIndex&&options.valuesPerWorker&&(projectsToSimulate=options.projects.slice(options.taskIndex*options.valuesPerWorker,(options.taskIndex+1)*options.valuesPerWorker));for(var projects=options.projects.sort(function(a,b){return a.startYear-b.startYear}),projectsByStartYear={},_iterator=projects,_isArray=Array.isArray(_iterator),_i=0,_iterator=_isArray?_iterator:_iterator[Symbol.iterator]();;){var _ref2;if(_isArray){if(_i>=_iterator.length)break;_ref2=_iterator[_i++]}else{if(_i=_iterator.next(),_i.done)break;_ref2=_i.value}var _project=_ref2,arr=projectsByStartYear[_project.startYear]=projectsByStartYear[_project.startYear]||[];
arr.push(_project)}var cashFlows=projectsToCashFlows(),noInterestReferenceLine=calculateNoInterestReferenceLine(cashFlows),numYears=projectsToSimulate.reduce(function(memo,project){return Math.max(memo,project.startYear)},0);return{investmentAmount:options.investmentAmount,liquidity:options.liquidity,noInterestReferenceLine:noInterestReferenceLine,numRuns:options.numRuns,numYears:numYears,projectsByStartYear:projectsByStartYear,simulatedValues:simulateOutcomes(cashFlows,numYears)}}function groupForValue(value,groups){return groups.find(function(group){return("undefined"==typeof group.from||group.from<=value)&&("undefined"==typeof group.to||group.to>value)})}function createGroups(requiredAmount,noInterestReference){return[{description:"Ziel erreichbar",from:requiredAmount,name:"green",percentage:0,separator:!0},{description:"mit Zusatzliquidität erreichbar",from:requiredAmount-environment.liquidity,name:"yellow",percentage:0,separator:!0,to:requiredAmount},{description:"nicht erreichbar",from:noInterestReference,name:"gray",percentage:0,separator:!1,to:requiredAmount-environment.liquidity},{description:"nicht erreichbar, mit Verlust",name:"red",percentage:0,separator:!1,to:noInterestReference}]}function calculateRequiredAmount(){for(var amount=project.totalAmount,projectsSameYear=environment.projectsByStartYear[project.startYear],_iterator2=projectsSameYear,_isArray2=Array.isArray(_iterator2),_i2=0,_iterator2=_isArray2?_iterator2:_iterator2[Symbol.iterator]();;){var _ref3;if(_isArray2){if(_i2>=_iterator2.length)break;_ref3=_iterator2[_i2++]}else{if(_i2=_iterator2.next(),_i2.done)break;_ref3=_i2.value}var otherProject=_ref3;if(otherProject===project)break;amount+=otherProject.totalAmount}return amount}function median(values){var half=Math.floor(values.length/2);return values.length%2?values[half]:(values[half-1]+values[half])/2}var project=_ref.project,options=_ref.options,NUMBER_OF_BUCKETS=10,environment=this.environment=this.environment||createMonteCarloEnvironment(options),requiredAmount=calculateRequiredAmount(),simulatedValuesThisYear=environment.simulatedValues[project.startYear];simulatedValuesThisYear.sort(function(a,b){return a-b});for(var groups=createGroups(requiredAmount,environment.noInterestReferenceLine[project.startYear]),valuesByGroup={},bucketSize=Math.round(simulatedValuesThisYear.length/NUMBER_OF_BUCKETS),buckets=[],i=0;i<simulatedValuesThisYear.length;i+=bucketSize){for(var bucket={max:Number.MIN_VALUE,min:Number.MAX_VALUE,subBuckets:{}},j=i;j<i+bucketSize;++j){var value=simulatedValuesThisYear[j];bucket.min=Math.min(bucket.min,value),bucket.max=Math.max(bucket.max,value);var group=groupForValue(simulatedValuesThisYear[j],groups);valuesByGroup[group.name]=(valuesByGroup[group.name]||0)+1;var subBucket=bucket.subBuckets[group.name]=bucket.subBuckets[group.name]||{group:group.name,max:Number.MIN_VALUE,min:Number.MAX_VALUE};subBucket.min=Math.min(subBucket.min,value),subBucket.max=Math.max(subBucket.max,value)}buckets.push(bucket)}var nonEmptyGroups=groups.filter(function(group){return!!valuesByGroup[group.name]});nonEmptyGroups.forEach(function(group){return group.percentage=valuesByGroup[group.name]/simulatedValuesThisYear.length});var oneSixth=Math.round(simulatedValuesThisYear.length/6);done({buckets:buckets,groups:nonEmptyGroups,max:simulatedValuesThisYear[simulatedValuesThisYear.length-1],median:median(simulatedValuesThisYear),min:simulatedValuesThisYear[0],project:project,twoThird:{max:simulatedValuesThisYear[simulatedValuesThisYear.length-oneSixth],min:simulatedValuesThisYear[oneSixth]}})}function threadsMonteCarlo(userOptions,pool){var options=initializeOptions(userOptions),jobs=[];pool.run(calculateProject,["https://raw.githubusercontent.com/mvarshney/simjs-source/master/src/random.js"]);for(var _iterator3=options.projects,_isArray3=Array.isArray(_iterator3),_i3=0,_iterator3=_isArray3?_iterator3:_iterator3[Symbol.iterator]();;){var _ref4;if(_isArray3){if(_i3>=_iterator3.length)break;_ref4=_iterator3[_i3++]}else{if(_i3=_iterator3.next(),_i3.done)break;_ref4=_i3.value}var project=_ref4;jobs.push(pool.send({options:options,project:project}).promise())}return Promise.all(jobs)}exports.a=threadsMonteCarlo},function(module,exports){(function(){"use strict";function runInContext(context){function Benchmark(name,fn,options){var bench=this;return bench instanceof Benchmark?(_.isPlainObject(name)?options=name:_.isFunction(name)?(options=fn,fn=name):_.isPlainObject(fn)?(options=fn,fn=null,bench.name=name):bench.name=name,setOptions(bench,options),bench.id||(bench.id=++counter),null==bench.fn&&(bench.fn=fn),bench.stats=cloneDeep(bench.stats),void(bench.times=cloneDeep(bench.times))):new Benchmark(name,fn,options)}function Deferred(clone){var deferred=this;return deferred instanceof Deferred?(deferred.benchmark=clone,void clock(deferred)):new Deferred(clone)}function Event(type){var event=this;return type instanceof Event?type:event instanceof Event?_.assign(event,{timeStamp:_.now()},"string"==typeof type?{type:type}:type):new Event(type)}function Suite(name,options){var suite=this;return suite instanceof Suite?(_.isPlainObject(name)?options=name:suite.name=name,void setOptions(suite,options)):new Suite(name,options)}function createFunction(){return createFunction=function(args,body){var result,anchor=freeDefine?freeDefine.amd:Benchmark,prop=uid+"createFunction";return runScript((freeDefine?"define.amd.":"Benchmark.")+prop+"=function("+args+"){"+body+"}"),result=anchor[prop],delete anchor[prop],result},createFunction=support.browser&&(createFunction("",'return"'+uid+'"')||_.noop)()==uid?createFunction:Function,createFunction.apply(null,arguments)}function delay(bench,fn){bench._timerId=_.delay(fn,1e3*bench.delay)}function destroyElement(element){trash.appendChild(element),trash.innerHTML=""}function getFirstArgument(fn){return!_.has(fn,"toString")&&(/^[\s(]*function[^(]*\(([^\s,)]+)/.exec(fn)||0)[1]||""}function getMean(sample){return _.reduce(sample,function(sum,x){return sum+x})/sample.length||0}function getSource(fn){var result="";return isStringable(fn)?result=String(fn):support.decompilation&&(result=_.result(/^[^{]+\{([\s\S]*)\}\s*$/.exec(fn),1)),result=(result||"").replace(/^\s+|\s+$/g,""),/^(?:\/\*+[\w\W]*?\*\/|\/\/.*?[\n\r\u2028\u2029]|\s)*(["'])use strict\1;?$/.test(result)?"":result}function isHostType(object,property){if(null==object)return!1;var type=typeof object[property];return!(rePrimitive.test(type)||"object"==type&&!object[property])}function isStringable(value){return _.isString(value)||_.has(value,"toString")&&_.isFunction(value.toString)}function require(id){try{var result=freeExports&&freeRequire(id)}catch(e){}return result||null}function runScript(code){var anchor=freeDefine?define.amd:Benchmark,script=doc.createElement("script"),sibling=doc.getElementsByTagName("script")[0],parent=sibling.parentNode,prop=uid+"runScript",prefix="("+(freeDefine?"define.amd.":"Benchmark.")+prop+"||function(){})();";try{script.appendChild(doc.createTextNode(prefix+code)),anchor[prop]=function(){destroyElement(script)}}catch(e){parent=parent.cloneNode(!1),sibling=null,script.text=code}parent.insertBefore(script,sibling),delete anchor[prop]}function setOptions(object,options){options=object.options=_.assign({},cloneDeep(object.constructor.options),cloneDeep(options)),_.forOwn(options,function(value,key){null!=value&&(/^on[A-Z]/.test(key)?_.each(key.split(" "),function(key){object.on(key.slice(2).toLowerCase(),value)}):_.has(object,key)||(object[key]=cloneDeep(value)))})}function resolve(){var deferred=this,clone=deferred.benchmark,bench=clone._original;bench.aborted?(deferred.teardown(),clone.running=!1,cycle(deferred)):++deferred.cycles<clone.count?clone.compiled.call(deferred,context,timer):(timer.stop(deferred),deferred.teardown(),delay(clone,function(){cycle(deferred)}))}function filter(array,callback){if("successful"===callback)callback=function(bench){return bench.cycles&&_.isFinite(bench.hz)&&!bench.error};else if("fastest"===callback||"slowest"===callback){var result=filter(array,"successful").sort(function(a,b){return a=a.stats,b=b.stats,(a.mean+a.moe>b.mean+b.moe?1:-1)*("fastest"===callback?1:-1)});return _.filter(result,function(bench){return 0==result[0].compare(bench)})}return _.filter(array,callback)}function formatNumber(number){return number=String(number).split("."),number[0].replace(/(?=(?:\d{3})+$)(?!\b)/g,",")+(number[1]?"."+number[1]:"")}function invoke(benches,name){function execute(){var listeners,async=isAsync(bench);return async&&(bench.on("complete",getNext),listeners=bench.events.complete,listeners.splice(0,0,listeners.pop())),result[index]=_.isFunction(bench&&bench[name])?bench[name].apply(bench,args):undefined,!async&&getNext()}function getNext(event){var cycleEvent,last=bench,async=isAsync(last);if(async&&(last.off("complete",getNext),last.emit("complete")),eventProps.type="cycle",eventProps.target=last,cycleEvent=Event(eventProps),options.onCycle.call(benches,cycleEvent),cycleEvent.aborted||raiseIndex()===!1)eventProps.type="complete",options.onComplete.call(benches,Event(eventProps));else if(bench=queued?benches[0]:result[index],isAsync(bench))delay(bench,execute);else{if(!async)return!0;for(;execute(););}return!!event&&void(event.aborted=!0)}function isAsync(object){var async=args[0]&&args[0].async;return"run"==name&&object instanceof Benchmark&&((null==async?object.options.async:async)&&support.timeout||object.defer)}function raiseIndex(){return index++,queued&&index>0&&shift.call(benches),(queued?benches.length:index<result.length)?index:index=!1}var args,bench,queued,index=-1,eventProps={currentTarget:benches},options={onStart:_.noop,onCycle:_.noop,onComplete:_.noop},result=_.toArray(benches);if(_.isString(name)?args=slice.call(arguments,2):(options=_.assign(options,name),name=options.name,args=_.isArray(args="args"in options?options.args:[])?args:[args],queued=options.queued),raiseIndex()!==!1)if(bench=result[index],eventProps.type="start",eventProps.target=bench,options.onStart.call(benches,Event(eventProps)),"run"==name&&benches instanceof Suite&&benches.aborted)eventProps.type="cycle",options.onCycle.call(benches,Event(eventProps)),eventProps.type="complete",options.onComplete.call(benches,Event(eventProps));else if(isAsync(bench))delay(bench,execute);else for(;execute(););return result}function join(object,separator1,separator2){var result=[],length=(object=Object(object)).length,arrayLike=length===length>>>0;return separator2||(separator2=": "),_.each(object,function(value,key){result.push(arrayLike?value:key+separator2+value)}),result.join(separator1||",")}function abortSuite(){var event,suite=this,resetting=calledBy.resetSuite;return suite.running&&(event=Event("abort"),suite.emit(event),event.cancelled&&!resetting||(calledBy.abortSuite=!0,suite.reset(),delete calledBy.abortSuite,resetting||(suite.aborted=!0,invoke(suite,"abort")))),suite}function add(name,fn,options){var suite=this,bench=new Benchmark(name,fn,options),event=Event({type:"add",target:bench});return suite.emit(event),event.cancelled||suite.push(bench),suite}function cloneSuite(options){var suite=this,result=new suite.constructor(_.assign({},suite.options,options));return _.forOwn(suite,function(value,key){_.has(result,key)||(result[key]=value&&_.isFunction(value.clone)?value.clone():cloneDeep(value))}),result}function filterSuite(callback){var suite=this,result=new suite.constructor(suite.options);return result.push.apply(result,filter(suite,callback)),result}function resetSuite(){var event,suite=this,aborting=calledBy.abortSuite;return suite.running&&!aborting?(calledBy.resetSuite=!0,suite.abort(),delete calledBy.resetSuite):!suite.aborted&&!suite.running||(suite.emit(event=Event("reset")),event.cancelled)||(suite.aborted=suite.running=!1,aborting||invoke(suite,"reset")),suite}function runSuite(options){var suite=this;return suite.reset(),suite.running=!0,options||(options={}),invoke(suite,{name:"run",args:options,queued:options.queued,onStart:function(event){suite.emit(event)},onCycle:function(event){var bench=event.target;bench.error&&suite.emit({type:"error",target:bench}),suite.emit(event),event.aborted=suite.aborted},onComplete:function(event){suite.running=!1,suite.emit(event)}}),suite}function emit(type){var listeners,object=this,event=Event(type),events=object.events,args=(arguments[0]=event,arguments);return event.currentTarget||(event.currentTarget=object),event.target||(event.target=object),delete event.result,events&&(listeners=_.has(events,event.type)&&events[event.type])&&_.each(listeners.slice(),function(listener){return(event.result=listener.apply(object,args))===!1&&(event.cancelled=!0),!event.aborted}),event.result}function listeners(type){var object=this,events=object.events||(object.events={});return _.has(events,type)?events[type]:events[type]=[]}function off(type,listener){var object=this,events=object.events;return events?(_.each(type?type.split(" "):events,function(listeners,type){var index;"string"==typeof listeners&&(type=listeners,listeners=_.has(events,type)&&events[type]),listeners&&(listener?(index=_.indexOf(listeners,listener),index>-1&&listeners.splice(index,1)):listeners.length=0)}),object):object}function on(type,listener){var object=this,events=object.events||(object.events={});return _.each(type.split(" "),function(type){(_.has(events,type)?events[type]:events[type]=[]).push(listener)}),object}function abort(){var event,bench=this,resetting=calledBy.reset;return bench.running&&(event=Event("abort"),bench.emit(event),event.cancelled&&!resetting||(calledBy.abort=!0,bench.reset(),delete calledBy.abort,support.timeout&&(clearTimeout(bench._timerId),delete bench._timerId),resetting||(bench.aborted=!0,bench.running=!1))),bench}function clone(options){var bench=this,result=new bench.constructor(_.assign({},bench,options));return result.options=_.assign({},cloneDeep(bench.options),cloneDeep(options)),_.forOwn(bench,function(value,key){_.has(result,key)||(result[key]=cloneDeep(value))}),result}function compare(other){function getScore(xA,sampleB){return _.reduce(sampleB,function(total,xB){return total+(xB>xA?0:xB<xA?1:.5)},0)}function getU(sampleA,sampleB){return _.reduce(sampleA,function(total,xA){return total+getScore(xA,sampleB)},0)}function getZ(u){return(u-size1*size2/2)/sqrt(size1*size2*(size1+size2+1)/12)}var bench=this;if(bench==other)return 0;var critical,zStat,sample1=bench.stats.sample,sample2=other.stats.sample,size1=sample1.length,size2=sample2.length,maxSize=max(size1,size2),minSize=min(size1,size2),u1=getU(sample1,sample2),u2=getU(sample2,sample1),u=min(u1,u2);return size1+size2>30?(zStat=getZ(u),abs(zStat)>1.96?u==u1?1:-1:0):(critical=maxSize<5||minSize<3?0:uTable[maxSize][minSize-3],u<=critical?u==u1?1:-1:0)}function reset(){var bench=this;if(bench.running&&!calledBy.abort)return calledBy.reset=!0,bench.abort(),delete calledBy.reset,bench;var event,index=0,changes=[],queue=[],data={destination:bench,source:_.assign({},cloneDeep(bench.constructor.prototype),cloneDeep(bench.options))};do _.forOwn(data.source,function(value,key){var changed,destination=data.destination,currValue=destination[key];"_"!=key.charAt(0)&&(value&&"object"==typeof value?(_.isArray(value)?(_.isArray(currValue)||(changed=currValue=[]),currValue.length!=value.length&&(changed=currValue=currValue.slice(0,value.length),currValue.length=value.length)):currValue&&"object"==typeof currValue||(changed=currValue={}),changed&&changes.push({destination:destination,key:key,value:currValue}),queue.push({destination:currValue,source:value})):value===currValue||null==value||_.isFunction(value)||changes.push({destination:destination,key:key,value:value}))});while(data=queue[index++]);return changes.length&&(bench.emit(event=Event("reset")),!event.cancelled)&&_.each(changes,function(data){data.destination[data.key]=data.value}),bench}function toStringBench(){var bench=this,error=bench.error,hz=bench.hz,id=bench.id,stats=bench.stats,size=stats.sample.length,pm="±",result=bench.name||(_.isNaN(id)?id:"<Test #"+id+">");if(error){var errorStr;errorStr=_.isObject(error)?join(_.isError(Error)?_.assign({name:error.name,message:error.message},error):error):String(error),result+=": "+errorStr}else result+=" x "+formatNumber(hz.toFixed(hz<100?2:0))+" ops/sec "+pm+stats.rme.toFixed(2)+"% ("+size+" run"+(1==size?"":"s")+" sampled)";return result}function clock(){function createCompiled(bench,decompilable,deferred,body){var fn=bench.fn,fnArg=deferred?getFirstArgument(fn)||"deferred":"";return templateData.uid=uid+uidCounter++,_.assign(templateData,{setup:decompilable?getSource(bench.setup):interpolate("m#.setup()"),fn:decompilable?getSource(fn):interpolate("m#.fn("+fnArg+")"),fnArg:fnArg,teardown:decompilable?getSource(bench.teardown):interpolate("m#.teardown()")}),"ns"==timer.unit?_.assign(templateData,{begin:interpolate("s#=n#()"),end:interpolate("r#=n#(s#);r#=r#[0]+(r#[1]/1e9)")}):"us"==timer.unit?timer.ns.stop?_.assign(templateData,{begin:interpolate("s#=n#.start()"),end:interpolate("r#=n#.microseconds()/1e6")}):_.assign(templateData,{begin:interpolate("s#=n#()"),end:interpolate("r#=(n#()-s#)/1e6")}):timer.ns.now?_.assign(templateData,{begin:interpolate("s#=n#.now()"),end:interpolate("r#=(n#.now()-s#)/1e3")}):_.assign(templateData,{begin:interpolate("s#=new n#().getTime()"),end:interpolate("r#=(new n#().getTime()-s#)/1e3")}),timer.start=createFunction(interpolate("o#"),interpolate("var n#=this.ns,${begin};o#.elapsed=0;o#.timeStamp=s#")),timer.stop=createFunction(interpolate("o#"),interpolate("var n#=this.ns,s#=o#.timeStamp,${end};o#.elapsed=r#")),createFunction(interpolate("window,t#"),"var global = window, clearTimeout = global.clearTimeout, setTimeout = global.setTimeout;\n"+interpolate(body))}function getRes(unit){for(var measured,begin,count=30,divisor=1e3,ns=timer.ns,sample=[];count--;){if("us"==unit)if(divisor=1e6,ns.stop)for(ns.start();!(measured=ns.microseconds()););else for(begin=ns();!(measured=ns()-begin););else if("ns"==unit){for(divisor=1e9,begin=(begin=ns())[0]+begin[1]/divisor;!(measured=(measured=ns())[0]+measured[1]/divisor-begin););divisor=1}else if(ns.now)for(begin=ns.now();!(measured=ns.now()-begin););else for(begin=(new ns).getTime();!(measured=(new ns).getTime()-begin););if(!(measured>0)){sample.push(1/0);break}sample.push(measured)}return getMean(sample)/divisor}function interpolate(string){return _.template(string.replace(/\#/g,/\d+/.exec(templateData.uid)))(templateData)}var options=Benchmark.options,templateData={},timers=[{ns:timer.ns,res:max(.0015,getRes("ms")),unit:"ms"}];clock=function(clone){var deferred;clone instanceof Deferred&&(deferred=clone,clone=deferred.benchmark);var bench=clone._original,stringable=isStringable(bench.fn),count=bench.count=clone.count,decompilable=stringable||support.decompilation&&(clone.setup!==_.noop||clone.teardown!==_.noop),id=bench.id,name=bench.name||("number"==typeof id?"<Test #"+id+">":id),result=0;clone.minTime=bench.minTime||(bench.minTime=bench.options.minTime=options.minTime);var funcBody=deferred?'var d#=this,${fnArg}=d#,m#=d#.benchmark._original,f#=m#.fn,su#=m#.setup,td#=m#.teardown;if(!d#.cycles){d#.fn=function(){var ${fnArg}=d#;if(typeof f#=="function"){try{${fn}\n}catch(e#){f#(d#)}}else{${fn}\n}};d#.teardown=function(){d#.cycles=0;if(typeof td#=="function"){try{${teardown}\n}catch(e#){td#()}}else{${teardown}\n}};if(typeof su#=="function"){try{${setup}\n}catch(e#){su#()}}else{${setup}\n};t#.start(d#);}d#.fn();return{uid:"${uid}"}':'var r#,s#,m#=this,f#=m#.fn,i#=m#.count,n#=t#.ns;${setup}\n${begin};while(i#--){${fn}\n}${end};${teardown}\nreturn{elapsed:r#,uid:"${uid}"}',compiled=bench.compiled=clone.compiled=createCompiled(bench,decompilable,deferred,funcBody),isEmpty=!(templateData.fn||stringable);try{if(isEmpty)throw new Error('The test "'+name+'" is empty. This may be the result of dead code removal.');deferred||(bench.count=1,compiled=decompilable&&(compiled.call(bench,context,timer)||{}).uid==templateData.uid&&compiled,bench.count=count)}catch(e){compiled=null,clone.error=e||new Error(String(e)),bench.count=count}if(!compiled&&!deferred&&!isEmpty){funcBody=(stringable||decompilable&&!clone.error?"function f#(){${fn}\n}var r#,s#,m#=this,i#=m#.count":"var r#,s#,m#=this,f#=m#.fn,i#=m#.count")+",n#=t#.ns;${setup}\n${begin};m#.f#=f#;while(i#--){m#.f#()}${end};delete m#.f#;${teardown}\nreturn{elapsed:r#}",compiled=createCompiled(bench,decompilable,deferred,funcBody);try{bench.count=1,compiled.call(bench,context,timer),bench.count=count,delete clone.error}catch(e){bench.count=count,clone.error||(clone.error=e||new Error(String(e)))}}return clone.error||(compiled=bench.compiled=clone.compiled=createCompiled(bench,decompilable,deferred,funcBody),result=compiled.call(deferred||bench,context,timer).elapsed),result};try{(timer.ns=new(context.chrome||context.chromium).Interval)&&timers.push({ns:timer.ns,res:getRes("us"),unit:"us"})}catch(e){}if(processObject&&"function"==typeof(timer.ns=processObject.hrtime)&&timers.push({ns:timer.ns,res:getRes("ns"),unit:"ns"}),microtimeObject&&"function"==typeof(timer.ns=microtimeObject.now)&&timers.push({ns:timer.ns,res:getRes("us"),unit:"us"}),timer=_.minBy(timers,"res"),timer.res==1/0)throw new Error("Benchmark.js was unable to find a working timer.");return options.minTime||(options.minTime=max(timer.res/2/.01,.05)),clock.apply(null,arguments)}function compute(bench,options){function enqueue(){queue.push(bench.clone({_original:bench,events:{abort:[update],cycle:[update],error:[update],start:[update]}}))}function update(event){var clone=this,type=event.type;bench.running?"start"==type?clone.count=bench.initCount:("error"==type&&(bench.error=clone.error),"abort"==type?(bench.abort(),bench.emit("cycle")):(event.currentTarget=event.target=bench,bench.emit(event))):bench.aborted&&(clone.events.abort.length=0,clone.abort())}function evaluate(event){var critical,df,mean,moe,rme,sd,sem,variance,clone=event.target,done=bench.aborted,now=_.now(),size=sample.push(clone.times.period),maxedOut=size>=minSamples&&(elapsed+=now-clone.times.timeStamp)/1e3>bench.maxTime,times=bench.times,varOf=function(sum,x){return sum+pow(x-mean,2)};(done||clone.hz==1/0)&&(maxedOut=!(size=sample.length=queue.length=0)),done||(mean=getMean(sample),variance=_.reduce(sample,varOf,0)/(size-1)||0,sd=sqrt(variance),sem=sd/sqrt(size),df=size-1,critical=tTable[Math.round(df)||1]||tTable.infinity,moe=sem*critical,rme=moe/mean*100||0,_.assign(bench.stats,{deviation:sd,mean:mean,moe:moe,rme:rme,sem:sem,variance:variance}),maxedOut&&(bench.initCount=initCount,bench.running=!1,done=!0,times.elapsed=(now-times.timeStamp)/1e3),bench.hz!=1/0&&(bench.hz=1/mean,times.cycle=mean*bench.count,times.period=mean)),queue.length<2&&!maxedOut&&enqueue(),event.aborted=done}options||(options={});var async=options.async,elapsed=0,initCount=bench.initCount,minSamples=bench.minSamples,queue=[],sample=bench.stats.sample;enqueue(),invoke(queue,{name:"run",args:{async:async},queued:!0,onCycle:evaluate,onComplete:function(){bench.emit("complete")}})}function cycle(clone,options){options||(options={});var deferred;clone instanceof Deferred&&(deferred=clone,clone=clone.benchmark);var clocked,cycles,divisor,event,minTime,period,async=options.async,bench=clone._original,count=clone.count,times=clone.times;clone.running&&(cycles=++clone.cycles,clocked=deferred?deferred.elapsed:clock(clone),minTime=clone.minTime,cycles>bench.cycles&&(bench.cycles=cycles),clone.error&&(event=Event("error"),event.message=clone.error,clone.emit(event),event.cancelled||clone.abort())),clone.running&&(bench.times.cycle=times.cycle=clocked,period=bench.times.period=times.period=clocked/count,bench.hz=clone.hz=1/period,bench.initCount=clone.initCount=count,clone.running=clocked<minTime,clone.running&&(clocked||null==(divisor=divisors[clone.cycles])||(count=floor(4e6/divisor)),count<=clone.count&&(count+=Math.ceil((minTime-clocked)/period)),clone.running=count!=1/0)),event=Event("cycle"),clone.emit(event),event.aborted&&clone.abort(),clone.running?(clone.count=count,deferred?clone.compiled.call(deferred,context,timer):async?delay(clone,function(){cycle(clone,options)}):cycle(clone)):(support.browser&&runScript(uid+"=1;delete "+uid),clone.emit("complete"))}function run(options){var bench=this,event=Event("start");return bench.running=!1,bench.reset(),bench.running=!0,bench.count=bench.initCount,bench.times.timeStamp=_.now(),bench.emit(event),event.cancelled||(options={async:(null==(options=options&&options.async)?bench.async:options)&&support.timeout},bench._original?bench.defer?Deferred(bench):cycle(bench,options):compute(bench,options)),bench}var _=context&&context._||require("lodash")||root._;if(!_)return Benchmark.runInContext=runInContext,Benchmark;context=context?_.defaults(root.Object(),context,_.pick(root,contextProps)):root;var Date=(context.Array,context.Date),Function=context.Function,Math=context.Math,Object=context.Object,String=(context.RegExp,context.String),arrayRef=[],objectProto=Object.prototype,abs=Math.abs,clearTimeout=context.clearTimeout,floor=Math.floor,max=(Math.log,Math.max),min=Math.min,pow=Math.pow,push=arrayRef.push,shift=(context.setTimeout,arrayRef.shift),slice=arrayRef.slice,sqrt=Math.sqrt,unshift=(objectProto.toString,arrayRef.unshift),req=require,doc=isHostType(context,"document")&&context.document,microtimeObject=req("microtime"),processObject=isHostType(context,"process")&&context.process,trash=doc&&doc.createElement("div"),uid="uid"+_.now(),calledBy={},support={};!function(){support.browser=doc&&isHostType(context,"navigator")&&!isHostType(context,"phantom"),support.timeout=isHostType(context,"setTimeout")&&isHostType(context,"clearTimeout");try{support.decompilation="1"===Function(("return ("+function(x){return{x:""+(1+x),y:0}}+")").replace(/__cov__[^;]+;/g,""))()(0).x}catch(e){support.decompilation=!1}}();var timer={ns:Date,start:null,stop:null},cloneDeep=_.partial(_.cloneDeepWith,_,function(value){return!_.isObject(value)||_.isArray(value)||_.isPlainObject(value)?undefined:value});return _.assign(Benchmark,{options:{async:!1,defer:!1,delay:.005,id:undefined,initCount:1,maxTime:5,minSamples:5,minTime:0,name:undefined,onAbort:undefined,onComplete:undefined,onCycle:undefined,onError:undefined,onReset:undefined,onStart:undefined},platform:context.platform||require("platform")||{description:context.navigator&&context.navigator.userAgent||null,layout:null,product:null,name:null,manufacturer:null,os:null,prerelease:null,version:null,toString:function(){return this.description||""}},version:"2.1.2"}),_.assign(Benchmark,{filter:filter,formatNumber:formatNumber,invoke:invoke,join:join,runInContext:runInContext,support:support}),_.each(["each","forEach","forOwn","has","indexOf","map","reduce"],function(methodName){Benchmark[methodName]=_[methodName]}),_.assign(Benchmark.prototype,{count:0,cycles:0,hz:0,compiled:undefined,error:undefined,fn:undefined,aborted:!1,running:!1,setup:_.noop,teardown:_.noop,stats:{moe:0,rme:0,sem:0,deviation:0,mean:0,sample:[],variance:0},times:{cycle:0,elapsed:0,period:0,timeStamp:0}}),_.assign(Benchmark.prototype,{abort:abort,clone:clone,compare:compare,emit:emit,listeners:listeners,off:off,on:on,reset:reset,run:run,toString:toStringBench}),_.assign(Deferred.prototype,{benchmark:null,cycles:0,elapsed:0,timeStamp:0}),_.assign(Deferred.prototype,{resolve:resolve}),_.assign(Event.prototype,{aborted:!1,cancelled:!1,currentTarget:undefined,result:undefined,target:undefined,timeStamp:0,type:""}),Suite.options={name:undefined},_.assign(Suite.prototype,{length:0,aborted:!1,running:!1}),_.assign(Suite.prototype,{abort:abortSuite,add:add,clone:cloneSuite,emit:emit,filter:filterSuite,join:arrayRef.join,listeners:listeners,off:off,on:on,pop:arrayRef.pop,push:push,reset:resetSuite,run:runSuite,reverse:arrayRef.reverse,shift:shift,slice:slice,sort:arrayRef.sort,splice:arrayRef.splice,unshift:unshift}),_.assign(Benchmark,{Deferred:Deferred,Event:Event,Suite:Suite}),_.each(["each","forEach","indexOf","map","reduce"],function(methodName){var func=_[methodName];Suite.prototype[methodName]=function(){var args=[this];return push.apply(args,arguments),func.apply(_,args)}}),_.each(["pop","shift","splice"],function(methodName){var func=arrayRef[methodName];Suite.prototype[methodName]=function(){var value=this,result=func.apply(value,arguments);return 0===value.length&&delete value[0],result}}),Suite.prototype.unshift=function(){var value=this;return unshift.apply(value,arguments),value.length},Benchmark}var undefined,objectTypes={function:!0,object:!0},root=objectTypes[typeof window]&&window||this,freeDefine="function"==typeof define&&"object"==typeof define.amd&&define.amd&&define,freeExports=objectTypes[typeof exports]&&exports&&!exports.nodeType&&exports,freeModule=objectTypes[typeof module]&&module&&!module.nodeType&&module,freeGlobal=freeExports&&freeModule&&"object"==typeof global&&global;!freeGlobal||freeGlobal.global!==freeGlobal&&freeGlobal.window!==freeGlobal&&freeGlobal.self!==freeGlobal||(root=freeGlobal);var freeRequire="function"==typeof require&&require,counter=0,moduleExports=freeModule&&freeModule.exports===freeExports&&freeExports,rePrimitive=/^(?:boolean|number|string|undefined)$/,uidCounter=0,contextProps=["Array","Date","Function","Math","Object","RegExp","String","_","clearTimeout","chrome","chromium","document","navigator","phantom","platform","process","runtime","setTimeout"],divisors={1:4096,2:512,3:64,4:8,5:0},tTable={1:12.706,2:4.303,3:3.182,4:2.776,5:2.571,6:2.447,7:2.365,8:2.306,9:2.262,10:2.228,11:2.201,12:2.179,13:2.16,14:2.145,15:2.131,16:2.12,17:2.11,18:2.101,19:2.093,20:2.086,21:2.08,22:2.074,23:2.069,24:2.064,25:2.06,26:2.056,27:2.052,28:2.048,29:2.045,30:2.042,infinity:1.96},uTable={5:[0,1,2],6:[1,2,3,5],7:[1,3,5,6,8],8:[2,4,6,8,10,13],9:[2,4,7,10,12,15,17],10:[3,5,8,11,14,17,20,23],11:[3,6,9,13,16,19,23,26,30],12:[4,7,11,14,18,22,26,29,33,37],13:[4,8,12,16,20,24,28,33,37,41,45],14:[5,9,13,17,22,26,31,36,40,45,50,55],15:[5,10,14,19,24,29,34,39,44,49,54,59,64],16:[6,11,15,21,26,31,37,42,47,53,59,64,70,75],17:[6,11,17,22,28,34,39,45,51,57,63,67,75,81,87],18:[7,12,18,24,30,36,42,48,55,61,67,74,80,86,93,99],19:[7,13,19,25,32,38,45,52,58,65,72,78,85,92,99,106,113],20:[8,14,20,27,34,41,48,55,62,69,76,83,90,98,105,112,119,127],21:[8,15,22,29,36,43,50,58,65,73,80,88,96,103,111,119,126,134,142],22:[9,16,23,30,38,45,53,61,69,77,85,93,101,109,117,125,133,141,150,158],23:[9,17,24,32,40,48,56,64,73,81,89,98,106,115,123,132,140,149,157,166,175],24:[10,17,25,33,42,50,59,67,76,85,94,102,111,120,129,138,147,156,165,174,183,192],25:[10,18,27,35,44,53,62,71,80,89,98,107,117,126,135,145,154,163,173,182,192,201,211],26:[11,19,28,37,46,55,64,74,83,93,102,112,122,132,141,151,161,171,181,191,200,210,220,230],27:[11,20,29,38,48,57,67,77,87,97,107,118,125,138,147,158,168,178,188,199,209,219,230,240,250],28:[12,21,30,40,50,60,70,80,90,101,111,122,132,143,154,164,175,186,196,207,218,228,239,250,261,272],29:[13,22,32,42,52,62,73,83,94,105,116,127,138,149,160,171,182,193,204,215,226,238,249,260,271,282,294],30:[13,23,33,43,54,65,76,87,98,109,120,131,143,154,166,177,189,200,212,223,235,247,258,270,282,293,305,317]};if("function"==typeof define&&"object"==typeof define.amd&&define.amd)define(["lodash","platform"],function(_,platform){return runInContext({_:_,platform:platform})});else{var Benchmark=runInContext();freeExports&&freeModule?(moduleExports&&((freeModule.exports=Benchmark).Benchmark=Benchmark),freeExports.Benchmark=Benchmark):root.Benchmark=Benchmark}}).call(this)},function(module,exports,__webpack_require__){(function(module,global){var __WEBPACK_AMD_DEFINE_RESULT__;(function(){"use strict";function capitalize(string){return string=String(string),string.charAt(0).toUpperCase()+string.slice(1)}function cleanupOS(os,pattern,label){var data={"10.0":"10",6.4:"10 Technical Preview",6.3:"8.1",6.2:"8",6.1:"Server 2008 R2 / 7","6.0":"Server 2008 / Vista",5.2:"Server 2003 / XP 64-bit",5.1:"XP",5.01:"2000 SP1","5.0":"2000",
"4.0":"NT","4.90":"ME"};return pattern&&label&&/^Win/i.test(os)&&!/^Windows Phone /i.test(os)&&(data=data[/[\d.]+$/.exec(os)])&&(os="Windows "+data),os=String(os),pattern&&label&&(os=os.replace(RegExp(pattern,"i"),label)),os=format(os.replace(/ ce$/i," CE").replace(/\bhpw/i,"web").replace(/\bMacintosh\b/,"Mac OS").replace(/_PowerPC\b/i," OS").replace(/\b(OS X) [^ \d]+/i,"$1").replace(/\bMac (OS X)\b/,"$1").replace(/\/(\d)/," $1").replace(/_/g,".").replace(/(?: BePC|[ .]*fc[ \d.]+)$/i,"").replace(/\bx86\.64\b/gi,"x86_64").replace(/\b(Windows Phone) OS\b/,"$1").replace(/\b(Chrome OS \w+) [\d.]+\b/,"$1").split(" on ")[0])}function each(object,callback){var index=-1,length=object?object.length:0;if("number"==typeof length&&length>-1&&length<=maxSafeInteger)for(;++index<length;)callback(object[index],index,object);else forOwn(object,callback)}function format(string){return string=trim(string),/^(?:webOS|i(?:OS|P))/.test(string)?string:capitalize(string)}function forOwn(object,callback){for(var key in object)hasOwnProperty.call(object,key)&&callback(object[key],key,object)}function getClassOf(value){return null==value?capitalize(value):toString.call(value).slice(8,-1)}function isHostType(object,property){var type=null!=object?typeof object[property]:"number";return!(/^(?:boolean|number|string|undefined)$/.test(type)||"object"==type&&!object[property])}function qualify(string){return String(string).replace(/([ -])(?!$)/g,"$1?")}function reduce(array,callback){var accumulator=null;return each(array,function(value,index){accumulator=callback(accumulator,value,index,array)}),accumulator}function trim(string){return String(string).replace(/^ +| +$/g,"")}function parse(ua){function getLayout(guesses){return reduce(guesses,function(result,guess){return result||RegExp("\\b"+(guess.pattern||qualify(guess))+"\\b","i").exec(ua)&&(guess.label||guess)})}function getManufacturer(guesses){return reduce(guesses,function(result,value,key){return result||(value[product]||value[/^[a-z]+(?: +[a-z]+\b)*/i.exec(product)]||RegExp("\\b"+qualify(key)+"(?:\\b|\\w*\\d)","i").exec(ua))&&key})}function getName(guesses){return reduce(guesses,function(result,guess){return result||RegExp("\\b"+(guess.pattern||qualify(guess))+"\\b","i").exec(ua)&&(guess.label||guess)})}function getOS(guesses){return reduce(guesses,function(result,guess){var pattern=guess.pattern||qualify(guess);return!result&&(result=RegExp("\\b"+pattern+"(?:/[\\d.]+|[ \\w.]*)","i").exec(ua))&&(result=cleanupOS(result,pattern,guess.label||guess)),result})}function getProduct(guesses){return reduce(guesses,function(result,guess){var pattern=guess.pattern||qualify(guess);return!result&&(result=RegExp("\\b"+pattern+" *\\d+[.\\w_]*","i").exec(ua)||RegExp("\\b"+pattern+"(?:; *(?:[a-z]+[_-])?[a-z]+\\d+|[^ ();-]*)","i").exec(ua))&&((result=String(guess.label&&!RegExp(pattern,"i").test(guess.label)?guess.label:result).split("/"))[1]&&!/[\d.]+/.test(result[0])&&(result[0]+=" "+result[1]),guess=guess.label||guess,result=format(result[0].replace(RegExp(pattern,"i"),guess).replace(RegExp("; *(?:"+guess+"[_-])?","i")," ").replace(RegExp("("+guess+")[-_.]?(\\w)","i"),"$1 $2"))),result})}function getVersion(patterns){return reduce(patterns,function(result,pattern){return result||(RegExp(pattern+"(?:-[\\d.]+/|(?: for [\\w-]+)?[ /-])([\\d.]+[^ ();/_-]*)","i").exec(ua)||0)[1]||null})}function toStringPlatform(){return this.description||""}var context=root,isCustomContext=ua&&"object"==typeof ua&&"String"!=getClassOf(ua);isCustomContext&&(context=ua,ua=null);var nav=context.navigator||{},userAgent=nav.userAgent||"";ua||(ua=userAgent);var data,isSpecialCasedOS,isModuleScope=isCustomContext||thisBinding==oldRoot,likeChrome=isCustomContext?!!nav.likeChrome:/\bChrome\b/.test(ua)&&!/internal|\n/i.test(toString.toString()),objectClass="Object",airRuntimeClass=isCustomContext?objectClass:"ScriptBridgingProxyObject",enviroClass=isCustomContext?objectClass:"Environment",javaClass=isCustomContext&&context.java?"JavaPackage":getClassOf(context.java),phantomClass=isCustomContext?objectClass:"RuntimeObject",java=/\bJava/.test(javaClass)&&context.java,rhino=java&&getClassOf(context.environment)==enviroClass,alpha=java?"a":"α",beta=java?"b":"β",doc=context.document||{},opera=context.operamini||context.opera,operaClass=reOpera.test(operaClass=isCustomContext&&opera?opera["[[Class]]"]:getClassOf(opera))?operaClass:opera=null,arch=ua,description=[],prerelease=null,useFeatures=ua==userAgent,version=useFeatures&&opera&&"function"==typeof opera.version&&opera.version(),layout=getLayout([{label:"EdgeHTML",pattern:"Edge"},"Trident",{label:"WebKit",pattern:"AppleWebKit"},"iCab","Presto","NetFront","Tasman","KHTML","Gecko"]),name=getName(["Adobe AIR","Arora","Avant Browser","Breach","Camino","Epiphany","Fennec","Flock","Galeon","GreenBrowser","iCab","Iceweasel","K-Meleon","Konqueror","Lunascape","Maxthon",{label:"Microsoft Edge",pattern:"Edge"},"Midori","Nook Browser","PaleMoon","PhantomJS","Raven","Rekonq","RockMelt","SeaMonkey",{label:"Silk",pattern:"(?:Cloud9|Silk-Accelerated)"},"Sleipnir","SlimBrowser",{label:"SRWare Iron",pattern:"Iron"},"Sunrise","Swiftfox","WebPositive","Opera Mini",{label:"Opera Mini",pattern:"OPiOS"},"Opera",{label:"Opera",pattern:"OPR"},"Chrome",{label:"Chrome Mobile",pattern:"(?:CriOS|CrMo)"},{label:"Firefox",pattern:"(?:Firefox|Minefield)"},{label:"Firefox for iOS",pattern:"FxiOS"},{label:"IE",pattern:"IEMobile"},{label:"IE",pattern:"MSIE"},"Safari"]),product=getProduct([{label:"BlackBerry",pattern:"BB10"},"BlackBerry",{label:"Galaxy S",pattern:"GT-I9000"},{label:"Galaxy S2",pattern:"GT-I9100"},{label:"Galaxy S3",pattern:"GT-I9300"},{label:"Galaxy S4",pattern:"GT-I9500"},"Google TV","Lumia","iPad","iPod","iPhone","Kindle",{label:"Kindle Fire",pattern:"(?:Cloud9|Silk-Accelerated)"},"Nexus","Nook","PlayBook","PlayStation 3","PlayStation 4","PlayStation Vita","TouchPad","Transformer",{label:"Wii U",pattern:"WiiU"},"Wii","Xbox One",{label:"Xbox 360",pattern:"Xbox"},"Xoom"]),manufacturer=getManufacturer({Apple:{iPad:1,iPhone:1,iPod:1},Archos:{},Amazon:{Kindle:1,"Kindle Fire":1},Asus:{Transformer:1},"Barnes & Noble":{Nook:1},BlackBerry:{PlayBook:1},Google:{"Google TV":1,Nexus:1},HP:{TouchPad:1},HTC:{},LG:{},Microsoft:{Xbox:1,"Xbox One":1},Motorola:{Xoom:1},Nintendo:{"Wii U":1,Wii:1},Nokia:{Lumia:1},Samsung:{"Galaxy S":1,"Galaxy S2":1,"Galaxy S3":1,"Galaxy S4":1},Sony:{"PlayStation 4":1,"PlayStation 3":1,"PlayStation Vita":1}}),os=getOS(["Windows Phone","Android","CentOS",{label:"Chrome OS",pattern:"CrOS"},"Debian","Fedora","FreeBSD","Gentoo","Haiku","Kubuntu","Linux Mint","OpenBSD","Red Hat","SuSE","Ubuntu","Xubuntu","Cygwin","Symbian OS","hpwOS","webOS ","webOS","Tablet OS","Linux","Mac OS X","Macintosh","Mac","Windows 98;","Windows "]);if(layout&&(layout=[layout]),manufacturer&&!product&&(product=getProduct([manufacturer])),(data=/\bGoogle TV\b/.exec(product))&&(product=data[0]),/\bSimulator\b/i.test(ua)&&(product=(product?product+" ":"")+"Simulator"),"Opera Mini"==name&&/\bOPiOS\b/.test(ua)&&description.push("running in Turbo/Uncompressed mode"),"IE"==name&&/\blike iPhone OS\b/.test(ua)?(data=parse(ua.replace(/like iPhone OS/,"")),manufacturer=data.manufacturer,product=data.product):/^iP/.test(product)?(name||(name="Safari"),os="iOS"+((data=/ OS ([\d_]+)/i.exec(ua))?" "+data[1].replace(/_/g,"."):"")):"Konqueror"!=name||/buntu/i.test(os)?manufacturer&&"Google"!=manufacturer&&(/Chrome/.test(name)&&!/\bMobile Safari\b/i.test(ua)||/\bVita\b/.test(product))||/\bAndroid\b/.test(os)&&/^Chrome/.test(name)&&/\bVersion\//i.test(ua)?(name="Android Browser",os=/\bAndroid\b/.test(os)?os:"Android"):"Silk"==name?(/\bMobi/i.test(ua)||(os="Android",description.unshift("desktop mode")),/Accelerated *= *true/i.test(ua)&&description.unshift("accelerated")):"PaleMoon"==name&&(data=/\bFirefox\/([\d.]+)\b/.exec(ua))?description.push("identifying as Firefox "+data[1]):"Firefox"==name&&(data=/\b(Mobile|Tablet|TV)\b/i.exec(ua))?(os||(os="Firefox OS"),product||(product=data[1])):name&&!(data=!/\bMinefield\b/i.test(ua)&&/\b(?:Firefox|Safari)\b/.exec(name))||(name&&!product&&/[\/,]|^[^(]+?\)/.test(ua.slice(ua.indexOf(data+"/")+8))&&(name=null),(data=product||manufacturer||os)&&(product||manufacturer||/\b(?:Android|Symbian OS|Tablet OS|webOS)\b/.test(os))&&(name=/[a-z]+(?: Hat)?/i.exec(/\bAndroid\b/.test(os)?os:data)+" Browser")):os="Kubuntu",version||(version=getVersion(["(?:Cloud9|CriOS|CrMo|Edge|FxiOS|IEMobile|Iron|Opera ?Mini|OPiOS|OPR|Raven|Silk(?!/[\\d.]+$))","Version",qualify(name),"(?:Firefox|Minefield|NetFront)"])),(data="iCab"==layout&&parseFloat(version)>3&&"WebKit"||/\bOpera\b/.test(name)&&(/\bOPR\b/.test(ua)?"Blink":"Presto")||/\b(?:Midori|Nook|Safari)\b/i.test(ua)&&!/^(?:Trident|EdgeHTML)$/.test(layout)&&"WebKit"||!layout&&/\bMSIE\b/i.test(ua)&&("Mac OS"==os?"Tasman":"Trident")||"WebKit"==layout&&/\bPlayStation\b(?! Vita\b)/i.test(name)&&"NetFront")&&(layout=[data]),"IE"==name&&(data=(/; *(?:XBLWP|ZuneWP)(\d+)/i.exec(ua)||0)[1])?(name+=" Mobile",os="Windows Phone "+(/\+$/.test(data)?data:data+".x"),description.unshift("desktop mode")):/\bWPDesktop\b/i.test(ua)?(name="IE Mobile",os="Windows Phone 8.x",description.unshift("desktop mode"),version||(version=(/\brv:([\d.]+)/.exec(ua)||0)[1])):"IE"!=name&&"Trident"==layout&&(data=/\brv:([\d.]+)/.exec(ua))&&(name&&description.push("identifying as "+name+(version?" "+version:"")),name="IE",version=data[1]),useFeatures){if(isHostType(context,"global"))if(java&&(data=java.lang.System,arch=data.getProperty("os.arch"),os=os||data.getProperty("os.name")+" "+data.getProperty("os.version")),isModuleScope&&isHostType(context,"system")&&(data=[context.system])[0]){os||(os=data[0].os||null);try{data[1]=context.require("ringo/engine").version,version=data[1].join("."),name="RingoJS"}catch(e){data[0].global.system==context.system&&(name="Narwhal")}}else"object"==typeof context.process&&!context.process.browser&&(data=context.process)?(name="Node.js",arch=data.arch,os=data.platform,version=/[\d.]+/.exec(data.version)[0]):rhino&&(name="Rhino");else getClassOf(data=context.runtime)==airRuntimeClass?(name="Adobe AIR",os=data.flash.system.Capabilities.os):getClassOf(data=context.phantom)==phantomClass?(name="PhantomJS",version=(data=data.version||null)&&data.major+"."+data.minor+"."+data.patch):"number"==typeof doc.documentMode&&(data=/\bTrident\/(\d+)/i.exec(ua))&&(version=[version,doc.documentMode],(data=+data[1]+4)!=version[1]&&(description.push("IE "+version[1]+" mode"),layout&&(layout[1]=""),version[1]=data),version="IE"==name?String(version[1].toFixed(1)):version[0]);os=os&&format(os)}version&&(data=/(?:[ab]|dp|pre|[ab]\d+pre)(?:\d+\+?)?$/i.exec(version)||/(?:alpha|beta)(?: ?\d)?/i.exec(ua+";"+(useFeatures&&nav.appMinorVersion))||/\bMinefield\b/i.test(ua)&&"a")&&(prerelease=/b/i.test(data)?"beta":"alpha",version=version.replace(RegExp(data+"\\+?$"),"")+("beta"==prerelease?beta:alpha)+(/\d+\+?/.exec(data)||"")),"Fennec"==name||"Firefox"==name&&/\b(?:Android|Firefox OS)\b/.test(os)?name="Firefox Mobile":"Maxthon"==name&&version?version=version.replace(/\.[\d.]+/,".x"):/\bXbox\b/i.test(product)?(os=null,"Xbox 360"==product&&/\bIEMobile\b/.test(ua)&&description.unshift("mobile mode")):!/^(?:Chrome|IE|Opera)$/.test(name)&&(!name||product||/Browser|Mobi/.test(name))||"Windows CE"!=os&&!/Mobi/i.test(ua)?"IE"==name&&useFeatures&&null===context.external?description.unshift("platform preview"):(/\bBlackBerry\b/.test(product)||/\bBB10\b/.test(ua))&&(data=(RegExp(product.replace(/ +/g," *")+"/([.\\d]+)","i").exec(ua)||0)[1]||version)?(data=[data,/BB10/.test(ua)],os=(data[1]?(product=null,manufacturer="BlackBerry"):"Device Software")+" "+data[0],version=null):this!=forOwn&&"Wii"!=product&&(useFeatures&&opera||/Opera/.test(name)&&/\b(?:MSIE|Firefox)\b/i.test(ua)||"Firefox"==name&&/\bOS X (?:\d+\.){2,}/.test(os)||"IE"==name&&(os&&!/^Win/.test(os)&&version>5.5||/\bWindows XP\b/.test(os)&&version>8||8==version&&!/\bTrident\b/.test(ua)))&&!reOpera.test(data=parse.call(forOwn,ua.replace(reOpera,"")+";"))&&data.name&&(data="ing as "+data.name+((data=data.version)?" "+data:""),reOpera.test(name)?(/\bIE\b/.test(data)&&"Mac OS"==os&&(os=null),data="identify"+data):(data="mask"+data,name=operaClass?format(operaClass.replace(/([a-z])([A-Z])/g,"$1 $2")):"Opera",/\bIE\b/.test(data)&&(os=null),useFeatures||(version=null)),layout=["Presto"],description.push(data)):name+=" Mobile",(data=(/\bAppleWebKit\/([\d.]+\+?)/i.exec(ua)||0)[1])&&(data=[parseFloat(data.replace(/\.(\d)$/,".0$1")),data],"Safari"==name&&"+"==data[1].slice(-1)?(name="WebKit Nightly",prerelease="alpha",version=data[1].slice(0,-1)):version!=data[1]&&version!=(data[2]=(/\bSafari\/([\d.]+\+?)/i.exec(ua)||0)[1])||(version=null),data[1]=(/\bChrome\/([\d.]+)/i.exec(ua)||0)[1],537.36==data[0]&&537.36==data[2]&&parseFloat(data[1])>=28&&"WebKit"==layout&&(layout=["Blink"]),useFeatures&&(likeChrome||data[1])?(layout&&(layout[1]="like Chrome"),data=data[1]||(data=data[0],data<530?1:data<532?2:data<532.05?3:data<533?4:data<534.03?5:data<534.07?6:data<534.1?7:data<534.13?8:data<534.16?9:data<534.24?10:data<534.3?11:data<535.01?12:data<535.02?"13+":data<535.07?15:data<535.11?16:data<535.19?17:data<536.05?18:data<536.1?19:data<537.01?20:data<537.11?"21+":data<537.13?23:data<537.18?24:data<537.24?25:data<537.36?26:"Blink"!=layout?"27":"28")):(layout&&(layout[1]="like Safari"),data=data[0],data=data<400?1:data<500?2:data<526?3:data<533?4:data<534?"4+":data<535?5:data<537?6:data<538?7:data<601?8:"8"),layout&&(layout[1]+=" "+(data+="number"==typeof data?".x":/[.+]/.test(data)?"":"+")),"Safari"==name&&(!version||parseInt(version)>45)&&(version=data)),"Opera"==name&&(data=/\bzbov|zvav$/.exec(os))?(name+=" ",description.unshift("desktop mode"),"zvav"==data?(name+="Mini",version=null):name+="Mobile",os=os.replace(RegExp(" *"+data+"$"),"")):"Safari"==name&&/\bChrome\b/.exec(layout&&layout[1])&&(description.unshift("desktop mode"),name="Chrome Mobile",version=null,/\bOS X\b/.test(os)?(manufacturer="Apple",os="iOS 4.3+"):os=null),version&&0==version.indexOf(data=/[\d.]+$/.exec(os))&&ua.indexOf("/"+data+"-")>-1&&(os=trim(os.replace(data,""))),layout&&!/\b(?:Avant|Nook)\b/.test(name)&&(/Browser|Lunascape|Maxthon/.test(name)||"Safari"!=name&&/^iOS/.test(os)&&/\bSafari\b/.test(layout[1])||/^(?:Adobe|Arora|Breach|Midori|Opera|Phantom|Rekonq|Rock|Sleipnir|Web)/.test(name)&&layout[1])&&(data=layout[layout.length-1])&&description.push(data),description.length&&(description=["("+description.join("; ")+")"]),manufacturer&&product&&product.indexOf(manufacturer)<0&&description.push("on "+manufacturer),product&&description.push((/^on /.test(description[description.length-1])?"":"on ")+product),os&&(data=/ ([\d.+]+)$/.exec(os),isSpecialCasedOS=data&&"/"==os.charAt(os.length-data[0].length-1),os={architecture:32,family:data&&!isSpecialCasedOS?os.replace(data[0],""):os,version:data?data[1]:null,toString:function(){var version=this.version;return this.family+(version&&!isSpecialCasedOS?" "+version:"")+(64==this.architecture?" 64-bit":"")}}),(data=/\b(?:AMD|IA|Win|WOW|x86_|x)64\b/i.exec(arch))&&!/\bi686\b/i.test(arch)?(os&&(os.architecture=64,os.family=os.family.replace(RegExp(" *"+data),"")),name&&(/\bWOW64\b/i.test(ua)||useFeatures&&/\w(?:86|32)$/.test(nav.cpuClass||nav.platform)&&!/\bWin64; x64\b/i.test(ua))&&description.unshift("32-bit")):os&&/^OS X/.test(os.family)&&"Chrome"==name&&parseFloat(version)>=39&&(os.architecture=64),ua||(ua=null);var platform={};return platform.description=ua,platform.layout=layout&&layout[0],platform.manufacturer=manufacturer,platform.name=name,platform.prerelease=prerelease,platform.product=product,platform.ua=ua,platform.version=name&&version,platform.os=os||{architecture:null,family:null,version:null,toString:function(){return"null"}},platform.parse=parse,platform.toString=toStringPlatform,platform.version&&description.unshift(version),platform.name&&description.unshift(name),os&&name&&(os!=String(os).split(" ")[0]||os!=name.split(" ")[0]&&!product)&&description.push(product?"("+os+")":"on "+os),description.length&&(platform.description=description.join(" ")),platform}var objectTypes={function:!0,object:!0},root=objectTypes[typeof window]&&window||this,oldRoot=root,freeExports=objectTypes[typeof exports]&&exports,freeModule=objectTypes[typeof module]&&module&&!module.nodeType&&module,freeGlobal=freeExports&&freeModule&&"object"==typeof global&&global;!freeGlobal||freeGlobal.global!==freeGlobal&&freeGlobal.window!==freeGlobal&&freeGlobal.self!==freeGlobal||(root=freeGlobal);var maxSafeInteger=Math.pow(2,53)-1,reOpera=/\bOpera/,thisBinding=this,objectProto=Object.prototype,hasOwnProperty=objectProto.hasOwnProperty,toString=objectProto.toString,platform=parse();root.platform=platform,__WEBPACK_AMD_DEFINE_RESULT__=function(){return platform}.call(exports,__webpack_require__,exports,module),!(void 0!==__WEBPACK_AMD_DEFINE_RESULT__&&(module.exports=__WEBPACK_AMD_DEFINE_RESULT__))}).call(this)}).call(exports,__webpack_require__(17)(module),__webpack_require__(0))},function(module,exports,__webpack_require__){module.exports=__webpack_require__.p+"aa8cb5fbc710c7dded973a341ced2e66.js"},function(module,exports,__webpack_require__){(function(global,setImmediate){var __WEBPACK_AMD_DEFINE_RESULT__;/*! Native Promise Only
    v0.8.1 (c) Kyle Simpson
    MIT License: http://getify.mit-license.org
*/
!function(name,context,definition){context[name]=context[name]||definition(),"undefined"!=typeof module&&module.exports?module.exports=context[name]:(__WEBPACK_AMD_DEFINE_RESULT__=function(){return context[name]}.call(exports,__webpack_require__,exports,module),!(void 0!==__WEBPACK_AMD_DEFINE_RESULT__&&(module.exports=__WEBPACK_AMD_DEFINE_RESULT__)))}("Promise","undefined"!=typeof global?global:this,function(){"use strict";function schedule(fn,self){scheduling_queue.add(fn,self),cycle||(cycle=timer(scheduling_queue.drain))}function isThenable(o){var _then,o_type=typeof o;return null==o||"object"!=o_type&&"function"!=o_type||(_then=o.then),"function"==typeof _then&&_then}function notify(){for(var i=0;i<this.chain.length;i++)notifyIsolated(this,1===this.state?this.chain[i].success:this.chain[i].failure,this.chain[i]);this.chain.length=0}function notifyIsolated(self,cb,chain){var ret,_then;try{cb===!1?chain.reject(self.msg):(ret=cb===!0?self.msg:cb.call(void 0,self.msg),ret===chain.promise?chain.reject(TypeError("Promise-chain cycle")):(_then=isThenable(ret))?_then.call(ret,chain.resolve,chain.reject):chain.resolve(ret))}catch(err){chain.reject(err)}}function resolve(msg){var _then,self=this;if(!self.triggered){self.triggered=!0,self.def&&(self=self.def);try{(_then=isThenable(msg))?schedule(function(){var def_wrapper=new MakeDefWrapper(self);try{_then.call(msg,function(){resolve.apply(def_wrapper,arguments)},function(){reject.apply(def_wrapper,arguments)})}catch(err){reject.call(def_wrapper,err)}}):(self.msg=msg,self.state=1,self.chain.length>0&&schedule(notify,self))}catch(err){reject.call(new MakeDefWrapper(self),err)}}}function reject(msg){var self=this;self.triggered||(self.triggered=!0,self.def&&(self=self.def),self.msg=msg,self.state=2,self.chain.length>0&&schedule(notify,self))}function iteratePromises(Constructor,arr,resolver,rejecter){for(var idx=0;idx<arr.length;idx++)!function(idx){Constructor.resolve(arr[idx]).then(function(msg){resolver(idx,msg)},rejecter)}(idx)}function MakeDefWrapper(self){this.def=self,this.triggered=!1}function MakeDef(self){this.promise=self,this.state=0,this.triggered=!1,this.chain=[],this.msg=void 0}function Promise(executor){if("function"!=typeof executor)throw TypeError("Not a function");if(0!==this.__NPO__)throw TypeError("Not a promise");this.__NPO__=1;var def=new MakeDef(this);this.then=function(success,failure){var o={success:"function"!=typeof success||success,failure:"function"==typeof failure&&failure};return o.promise=new this.constructor(function(resolve,reject){if("function"!=typeof resolve||"function"!=typeof reject)throw TypeError("Not a function");o.resolve=resolve,o.reject=reject}),def.chain.push(o),0!==def.state&&schedule(notify,def),o.promise},this.catch=function(failure){return this.then(void 0,failure)};try{executor.call(void 0,function(msg){resolve.call(def,msg)},function(msg){reject.call(def,msg)})}catch(err){reject.call(def,err)}}var builtInProp,cycle,scheduling_queue,ToString=Object.prototype.toString,timer="undefined"!=typeof setImmediate?function(fn){return setImmediate(fn)}:setTimeout;try{Object.defineProperty({},"x",{}),builtInProp=function(obj,name,val,config){return Object.defineProperty(obj,name,{value:val,writable:!0,configurable:config!==!1})}}catch(err){builtInProp=function(obj,name,val){return obj[name]=val,obj}}scheduling_queue=function(){function Item(fn,self){this.fn=fn,this.self=self,this.next=void 0}var first,last,item;return{add:function(fn,self){item=new Item(fn,self),last?last.next=item:first=item,last=item,item=void 0},drain:function(){var f=first;for(first=last=cycle=void 0;f;)f.fn.call(f.self),f=f.next}}}();var PromisePrototype=builtInProp({},"constructor",Promise,!1);return Promise.prototype=PromisePrototype,builtInProp(PromisePrototype,"__NPO__",0,!1),builtInProp(Promise,"resolve",function(msg){var Constructor=this;return msg&&"object"==typeof msg&&1===msg.__NPO__?msg:new Constructor(function(resolve,reject){if("function"!=typeof resolve||"function"!=typeof reject)throw TypeError("Not a function");resolve(msg)})}),builtInProp(Promise,"reject",function(msg){return new this(function(resolve,reject){if("function"!=typeof resolve||"function"!=typeof reject)throw TypeError("Not a function");reject(msg)})}),builtInProp(Promise,"all",function(arr){var Constructor=this;return"[object Array]"!=ToString.call(arr)?Constructor.reject(TypeError("Not an array")):0===arr.length?Constructor.resolve([]):new Constructor(function(resolve,reject){if("function"!=typeof resolve||"function"!=typeof reject)throw TypeError("Not a function");var len=arr.length,msgs=Array(len),count=0;iteratePromises(Constructor,arr,function(idx,msg){msgs[idx]=msg,++count===len&&resolve(msgs)},reject)})}),builtInProp(Promise,"race",function(arr){var Constructor=this;return"[object Array]"!=ToString.call(arr)?Constructor.reject(TypeError("Not an array")):new Constructor(function(resolve,reject){if("function"!=typeof resolve||"function"!=typeof reject)throw TypeError("Not a function");iteratePromises(Constructor,arr,function(idx,msg){resolve(msg)},reject)})}),Promise})}).call(exports,__webpack_require__(0),__webpack_require__(14).setImmediate)},,function(module,exports){"use strict";exports.__esModule=!0,exports.default={pool:{size:navigator.hardwareConcurrency||8}}},function(module,exports,__webpack_require__){"use strict";exports.__esModule=!0;var _os=__webpack_require__(41);exports.default={pool:{size:(0,_os.cpus)().length}}},function(module,exports,__webpack_require__){"use strict";function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}function _classCallCheck(instance,Constructor){if(!(instance instanceof Constructor))throw new TypeError("Cannot call a class as a function")}function _possibleConstructorReturn(self,call){if(!self)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!call||"object"!=typeof call&&"function"!=typeof call?self:call}function _inherits(subClass,superClass){if("function"!=typeof superClass&&null!==superClass)throw new TypeError("Super expression must either be null or a function, not "+typeof superClass);subClass.prototype=Object.create(superClass&&superClass.prototype,{constructor:{value:subClass,enumerable:!1,writable:!0,configurable:!0}}),superClass&&(Object.setPrototypeOf?Object.setPrototypeOf(subClass,superClass):subClass.__proto__=superClass)}exports.__esModule=!0;var _eventemitter=__webpack_require__(3),_eventemitter2=_interopRequireDefault(_eventemitter),Job=function(_EventEmitter){function Job(pool){_classCallCheck(this,Job);var _this=_possibleConstructorReturn(this,_EventEmitter.call(this));return _this.pool=pool,_this.thread=null,_this.runArgs=[],_this.sendArgs=[],pool.emit("newJob",_this),_this}return _inherits(Job,_EventEmitter),Job.prototype.run=function(){for(var _len=arguments.length,args=Array(_len),_key=0;_key<_len;_key++)args[_key]=arguments[_key];if(0===args.length)throw new Error("Cannot call .run() without arguments.");return this.runArgs=args,this},Job.prototype.send=function(){if(0===this.runArgs.length)throw new Error("Cannot .send() before .run().");for(var _len2=arguments.length,args=Array(_len2),_key2=0;_key2<_len2;_key2++)args[_key2]=arguments[_key2];return this.sendArgs=args,this.emit("readyToRun"),this},Job.prototype.executeOn=function(thread){var _thread$once$once$run,_thread$once$once;return(_thread$once$once$run=(_thread$once$once=thread.once("message",this.emit.bind(this,"done")).once("error",this.emit.bind(this,"error"))).run.apply(_thread$once$once,this.runArgs)).send.apply(_thread$once$once$run,this.sendArgs),this.thread=thread,this.emit("threadChanged"),this},Job.prototype.promise=function(){var _this2=this;return new Promise(function(resolve){_this2.thread?resolve(_this2.thread.promise()):_this2.once("threadChanged",function(){resolve(_this2.thread.promise())})})},Job}(_eventemitter2.default);exports.default=Job},function(module,exports,__webpack_require__){"use strict";function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}function _classCallCheck(instance,Constructor){if(!(instance instanceof Constructor))throw new TypeError("Cannot call a class as a function")}function _possibleConstructorReturn(self,call){if(!self)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!call||"object"!=typeof call&&"function"!=typeof call?self:call}function _inherits(subClass,superClass){if("function"!=typeof superClass&&null!==superClass)throw new TypeError("Super expression must either be null or a function, not "+typeof superClass);subClass.prototype=Object.create(superClass&&superClass.prototype,{constructor:{value:subClass,enumerable:!1,writable:!0,configurable:!0}}),superClass&&(Object.setPrototypeOf?Object.setPrototypeOf(subClass,superClass):subClass.__proto__=superClass)}exports.__esModule=!0;var _eventemitter=__webpack_require__(3),_eventemitter2=_interopRequireDefault(_eventemitter),_job=__webpack_require__(34),_job2=_interopRequireDefault(_job),_defaults=__webpack_require__(16),_defaults2=_interopRequireDefault(_defaults),_=__webpack_require__(15),Pool=function(_EventEmitter){function Pool(threads){_classCallCheck(this,Pool);var _this=_possibleConstructorReturn(this,_EventEmitter.call(this));return _this.threads=Pool.spawn(threads||_defaults2.default.pool.size),_this.idleThreads=_this.threads.slice(),_this.jobQueue=[],_this.runArgs=[],_this.on("newJob",function(job){return _this.handleNewJob(job)}),_this.on("threadAvailable",function(){return _this.dequeue()}),_this}return _inherits(Pool,_EventEmitter),Pool.prototype.run=function(){for(var _len=arguments.length,args=Array(_len),_key=0;_key<_len;_key++)args[_key]=arguments[_key];return this.runArgs=args,this},Pool.prototype.send=function(){if(!this.runArgs)throw new Error("Pool.send() called without prior Pool.run(). You need to define what to run first.");var job=new _job2.default(this);return job.run.apply(job,this.runArgs),job.send.apply(job,arguments)},Pool.prototype.killAll=function(){this.threads.forEach(function(thread){thread.kill()})},Pool.prototype.queueJob=function(job){this.jobQueue.push(job),this.dequeue()},Pool.prototype.dequeue=function(){var _this2=this;if(0!==this.jobQueue.length&&0!==this.idleThreads.length){var job=this.jobQueue.shift(),thread=this.idleThreads.shift();job.once("done",function(){for(var _len2=arguments.length,args=Array(_len2),_key2=0;_key2<_len2;_key2++)args[_key2]=arguments[_key2];return _this2.handleJobSuccess.apply(_this2,[thread,job].concat(args))}).once("error",function(){for(var _len3=arguments.length,args=Array(_len3),_key3=0;_key3<_len3;_key3++)args[_key3]=arguments[_key3];return _this2.handleJobError.apply(_this2,[thread,job].concat(args))}),job.executeOn(thread)}},Pool.prototype.handleNewJob=function(job){var _this3=this;this.lastCreatedJob=job,job.once("readyToRun",function(){return _this3.queueJob(job)})},Pool.prototype.handleJobSuccess=function(thread,job){for(var _len4=arguments.length,responseArgs=Array(_len4>2?_len4-2:0),_key4=2;_key4<_len4;_key4++)responseArgs[_key4-2]=arguments[_key4];this.emit.apply(this,["done",job].concat(responseArgs)),this.handleJobDone(thread)},Pool.prototype.handleJobError=function(thread,job,error){this.emit("error",job,error),this.handleJobDone(thread)},Pool.prototype.handleJobDone=function(thread){var _this4=this;this.idleThreads.push(thread),this.emit("threadAvailable"),this.idleThreads.length===this.threads.length&&setTimeout(function(){_this4.emit("finished")},0)},Pool}(_eventemitter2.default);exports.default=Pool,Pool.spawn=function(threadCount){for(var threads=[],threadIndex=0;threadIndex<threadCount;threadIndex++)threads.push((0,_.spawn)());return threads}},function(module,exports,__webpack_require__){"use strict";function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}exports.__esModule=!0;var _slaveCode=__webpack_require__(37),_slaveCode2=_interopRequireDefault(_slaveCode),slaveCodeDataUri="data:text/javascript;charset=utf-8,"+encodeURI(_slaveCode2.default),createBlobURL=window.createBlobURL||window.createObjectURL;if(!createBlobURL){var URL=window.URL||window.webkitURL;if(!URL)throw new Error("No Blob creation implementation found.");createBlobURL=URL.createObjectURL}if("function"==typeof window.BlobBuilder&&"function"==typeof createBlobURL){var blobBuilder=new window.BlobBuilder;blobBuilder.append(_slaveCode2.default),slaveCodeDataUri=createBlobURL(blobBuilder.getBlob())}else if("function"==typeof window.Blob&&"function"==typeof createBlobURL){var blob=new window.Blob([_slaveCode2.default],{type:"text/javascript"});slaveCodeDataUri=createBlobURL(blob)}exports.default=slaveCodeDataUri},function(module,exports){module.exports="/*eslint-env worker*/\n/*global importScripts*/\n/*eslint-disable no-console*/\nself.module = {\n  exports : function() {\n    if (console) { console.error('No thread logic initialized.'); }\n  }\n};\n\nfunction handlerDone() {\n  var args = Array.prototype.slice.call(arguments, 0);\n  this.postMessage({ response : args });\n}\n\nfunction handlerProgress(progress) {\n  this.postMessage({ progress : progress });\n}\n\nfunction handlerDoneTransfer() {\n  var args = Array.prototype.slice.call(arguments);\n  var lastArg = args.pop();\n\n  if (!(lastArg instanceof Array) && this.console) {\n    console.error('Expected 2nd parameter of <doneCallback>.transfer() to be an array. Got:', lastArg);\n  }\n\n  this.postMessage({ response : args }, lastArg);\n}\n\nself.onmessage = function (event) {\n  var scripts = event.data.scripts;\n  if (scripts && scripts.length > 0 && typeof importScripts !== 'function') {\n    throw new Error('importScripts() not supported.');\n  }\n\n  if (event.data.initByScripts) {\n    importScripts.apply(null, scripts);\n  }\n\n  if (event.data.initByMethod) {\n    var method = event.data.method;\n    this.module.exports = Function.apply(null, method.args.concat(method.body));\n\n    if (scripts && scripts.length > 0) {\n      importScripts.apply(null, scripts);\n    }\n  }\n\n  if (event.data.doRun) {\n    var handler = this.module.exports;\n    if (typeof handler !== 'function') {\n      throw new Error('Cannot run thread logic. No handler has been exported.');\n    }\n\n    var preparedHandlerDone = handlerDone.bind(this);\n    preparedHandlerDone.transfer = handlerDoneTransfer.bind(this);\n\n    handler.call(this, event.data.param, preparedHandlerDone, handlerProgress.bind(this));\n  }\n}.bind(self);\n"},function(module,exports,__webpack_require__){"use strict";function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}function _classCallCheck(instance,Constructor){if(!(instance instanceof Constructor))throw new TypeError("Cannot call a class as a function")}function _possibleConstructorReturn(self,call){if(!self)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!call||"object"!=typeof call&&"function"!=typeof call?self:call}function _inherits(subClass,superClass){if("function"!=typeof superClass&&null!==superClass)throw new TypeError("Super expression must either be null or a function, not "+typeof superClass);subClass.prototype=Object.create(superClass&&superClass.prototype,{constructor:{value:subClass,enumerable:!1,writable:!0,configurable:!0}}),superClass&&(Object.setPrototypeOf?Object.setPrototypeOf(subClass,superClass):subClass.__proto__=superClass)}function joinPaths(path1,path2){return path1&&path2?"/"===path1.charAt(path1.length-1)||"/"===path2.charAt(0)?path1+path2:path1+"/"+path2:path1+path2}function prependScriptUrl(scriptUrl){var prefix=(0,_config.getConfig)().basepath.web;return prefix?joinPaths(prefix,scriptUrl):scriptUrl}function convertToArray(input){for(var outputArray=[],index=0;"undefined"!=typeof input[index];)outputArray.push(input[index]),index++;return outputArray}function logError(error){if(error.stack)console.error(error.stack);else if(error.message&&error.filename&&error.lineno){var fileName=error.filename.match(/^data:text\/javascript/)&&error.filename.length>50?error.filename.substr(0,50)+"...":error.filename;console.error(error.message+" @"+fileName+":"+error.lineno)}else console.error(error)}exports.__esModule=!0;var _typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(obj){return typeof obj}:function(obj){return obj&&"function"==typeof Symbol&&obj.constructor===Symbol&&obj!==Symbol.prototype?"symbol":typeof obj},_eventemitter=__webpack_require__(3),_eventemitter2=_interopRequireDefault(_eventemitter),_slaveCodeUri=__webpack_require__(36),_slaveCodeUri2=_interopRequireDefault(_slaveCodeUri),_config=__webpack_require__(13);if("object"!==_typeof(window.Worker)&&"function"!=typeof window.Worker)throw new Error("Browser does not support web workers!");var Worker=function(_EventEmitter){function Worker(){var initialScript=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null,importScripts=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[];_classCallCheck(this,Worker);var _this=_possibleConstructorReturn(this,_EventEmitter.call(this));return _this.currentRunnable=null,_this.currentImportScripts=[],_this.initWorker(),_this.worker.addEventListener("message",_this.handleMessage.bind(_this)),_this.worker.addEventListener("error",_this.handleError.bind(_this)),initialScript&&_this.run(initialScript,importScripts),_this}return _inherits(Worker,_EventEmitter),Worker.prototype.initWorker=function(){try{this.worker=new window.Worker(_slaveCodeUri2.default)}catch(error){var slaveScriptUrl=(0,_config.getConfig)().fallback.slaveScriptUrl;if(!slaveScriptUrl)throw error;this.worker=new window.Worker(_slaveCodeUri2.default)}},Worker.prototype.run=function(toRun){var importScripts=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[];return this.alreadyInitializedToRun(toRun,importScripts)?this:("function"==typeof toRun?this.runMethod(toRun,importScripts):this.runScripts(toRun,importScripts),this.currentRunnable=toRun,this.currentImportScripts=importScripts,this)},Worker.prototype.runMethod=function(method,importScripts){var methodStr=method.toString(),args=methodStr.substring(methodStr.indexOf("(")+1,methodStr.indexOf(")")).split(","),body=methodStr.substring(methodStr.indexOf("{")+1,methodStr.lastIndexOf("}"));this.worker.postMessage({initByMethod:!0,method:{args:args,body:body},scripts:importScripts.map(prependScriptUrl)})},Worker.prototype.runScripts=function(script,importScripts){if(!script)throw new Error("Must pass a function or a script URL to run().");this.worker.postMessage({initByScripts:!0,scripts:importScripts.concat([script]).map(prependScriptUrl)})},Worker.prototype.send=function(param){var transferables=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[];return this.worker.postMessage({doRun:!0,param:param},transferables),this},Worker.prototype.kill=function(){return this.worker.terminate(),this.emit("exit"),this},Worker.prototype.promise=function(){var _this2=this;return new Promise(function(resolve,reject){var resolved=void 0,rejected=void 0;resolved=function(result){_this2.removeListener("error",rejected),resolve(result)},rejected=function(err){_this2.removeListener("message",resolved),reject(err)},_this2.once("message",resolved).once("error",rejected)})},Worker.prototype.alreadyInitializedToRun=function(toRun,importScripts){var runnablesMatch=this.currentRunnable===toRun,importScriptsMatch=this.currentImportScripts===importScripts||0===importScripts.length&&0===this.currentImportScripts.length;return runnablesMatch&&importScriptsMatch},Worker.prototype.handleMessage=function(event){if(event.data.error)this.handleError(event.data.error);else if(event.data.progress)this.handleProgress(event.data.progress);else{var responseArgs=convertToArray(event.data.response);this.emit.apply(this,["message"].concat(responseArgs)),this.emit.apply(this,["done"].concat(responseArgs))}},Worker.prototype.handleProgress=function(progress){this.emit("progress",progress)},Worker.prototype.handleError=function(error){this.listeners("error",!0)||logError(error),error.preventDefault&&error.preventDefault(),this.emit("error",error)},Worker}(_eventemitter2.default);exports.default=Worker},function(module,exports,__webpack_require__){"use strict";(function(process){"undefined"!=typeof process&&"pid"in process?module.exports=__webpack_require__(40):module.exports=__webpack_require__(38)}).call(exports,__webpack_require__(4))},function(module,exports,__webpack_require__){"use strict";(function(__dirname){function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}function _classCallCheck(instance,Constructor){if(!(instance instanceof Constructor))throw new TypeError("Cannot call a class as a function")}function _possibleConstructorReturn(self,call){if(!self)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!call||"object"!=typeof call&&"function"!=typeof call?self:call}function _inherits(subClass,superClass){if("function"!=typeof superClass&&null!==superClass)throw new TypeError("Super expression must either be null or a function, not "+typeof superClass);subClass.prototype=Object.create(superClass&&superClass.prototype,{constructor:{value:subClass,enumerable:!1,writable:!0,configurable:!0}}),superClass&&(Object.setPrototypeOf?Object.setPrototypeOf(subClass,superClass):subClass.__proto__=superClass)}exports.__esModule=!0;var _child_process=__webpack_require__(42),_child_process2=_interopRequireDefault(_child_process),_path=__webpack_require__(43),_path2=_interopRequireDefault(_path),_eventemitter=__webpack_require__(3),_eventemitter2=_interopRequireDefault(_eventemitter),_config=__webpack_require__(13),Worker=function(_EventEmitter){function Worker(initialRunnable){var options=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};_classCallCheck(this,Worker);var _this=_possibleConstructorReturn(this,_EventEmitter.call(this));return _this.slave=_child_process2.default.fork(_path2.default.join(__dirname,"slave.js"),[],options),_this.slave.on("message",_this.handleMessage.bind(_this)),_this.slave.on("error",_this.handleError.bind(_this)),_this.slave.on("exit",_this.emit.bind(_this,"exit")),initialRunnable&&_this.run(initialRunnable),_this}return _inherits(Worker,_EventEmitter),Worker.prototype.run=function(toRun){return"function"==typeof toRun?this.runMethod(toRun):this.runScript(toRun),this},Worker.prototype.runMethod=function(method){this.slave.send({initByMethod:!0,method:method.toString()})},Worker.prototype.runScript=function(script){if(!script)throw new Error("Must pass a function or a script path to run().");var prefixedScriptPath=_path2.default.join((0,_config.getConfig)().basepath.node,script);this.slave.send({initByScript:!0,script:_path2.default.resolve(prefixedScriptPath)})},Worker.prototype.send=function(param){return this.slave.send({doRun:!0,param:param}),this},Worker.prototype.kill=function(){return this.slave.kill(),this},Worker.prototype.promise=function(){var _this2=this;return new Promise(function(resolve,reject){var resolved=void 0,rejected=void 0;resolved=function(result){_this2.removeListener("error",rejected),resolve(result)},rejected=function(err){_this2.removeListener("message",resolved),reject(err)},_this2.once("message",resolved).once("error",rejected)})},Worker.prototype.handleMessage=function(message){if(message.error){var error=new Error(message.error.message);error.stack=message.error.stack,this.handleError(error)}else message.progress?this.handleProgress(message.progress):(this.emit.apply(this,["message"].concat(message.response)),this.emit.apply(this,["done"].concat(message.response)))},Worker.prototype.handleProgress=function(progress){this.emit("progress",progress)},Worker.prototype.handleError=function(error){this.listeners("error",!0)||console.error(error.stack||error),this.emit("error",error)},Worker}(_eventemitter2.default);exports.default=Worker}).call(exports,"/")},function(module,exports){},41,41,,function(module,exports,__webpack_require__){"use strict";function addAsyncTest(suite,optionsOrTitle,fn){var options="string"==typeof optionsOrTitle?{name:optionsOrTitle,fn:fn}:optionsOrTitle,asyncFn=options.fn;return options.defer=!0,options.fn=function(deferred){var benchmark=this;asyncFn.apply(void 0,[]).then(function(){deferred.resolve()},function(error){console.error(error),benchmark.error=error,deferred.resolve()})},suite.add(options)}function addThreadJsTest(suite,name,_fn){for(var _len=arguments.length,args=Array(_len>3?_len-3:0),_key=3;_key<_len;_key++)args[_key-3]=arguments[_key];var _this=this,argsWithPool=void 0,pool=void 0;addAsyncTest(suite,{name:name,setup:function(){pool=new __WEBPACK_IMPORTED_MODULE_14_threads__.Pool,argsWithPool=args.slice(),argsWithPool.push(pool)},fn:function(){return _fn.apply(_this,argsWithPool)},teardown:function(){pool&&pool.killAll()}})}function addKnightBoardTests(suite){for(var boardSizes=knightRunner6x6.checked?[5,6]:[5],_loop=function(){if(_isArray){if(_i>=_iterator.length)return"break";_ref=_iterator[_i++]}else{if(_i=_iterator.next(),_i.done)return"break";_ref=_i.value}var boardSize=_ref,title="Knights Tour ("+boardSize+"x"+boardSize+")";suite.add("sync: "+title,function(){__webpack_require__.i(__WEBPACK_IMPORTED_MODULE_3__transpiled_knights_tour__.b)({x:0,y:0},boardSize)}),addAsyncTest(suite,"parallel-dynamic: "+title,function(){return __webpack_require__.i(__WEBPACK_IMPORTED_MODULE_5__dynamic_knights_tour__.a)({x:0,y:0},boardSize)}),addAsyncTest(suite,"parallel-transpiled: "+title,function(){return __webpack_require__.i(__WEBPACK_IMPORTED_MODULE_3__transpiled_knights_tour__.a)({x:0,y:0},boardSize)}),addAsyncTest(suite,"paralleljs: "+title,function(){return __webpack_require__.i(__WEBPACK_IMPORTED_MODULE_10__paralleljs_knights_tour__.a)({x:0,y:0},boardSize)}),addThreadJsTest(suite,"threadsjs: "+title,__WEBPACK_IMPORTED_MODULE_13__threads_knights_tour__.a,{x:0,y:0},boardSize),addAsyncTest(suite,"hamstersjs: "+title,function(){return __webpack_require__.i(__WEBPACK_IMPORTED_MODULE_16__hamstersjs_knights_tour__.a)({x:0,y:0},boardSize)})},_iterator=boardSizes,_isArray=Array.isArray(_iterator),_i=0,_iterator=_isArray?_iterator:_iterator[Symbol.iterator]();;){var _ref,_ret=_loop();if("break"===_ret)break}}function addMonteCarloTest(suite,options){var runOptions=__WEBPACK_IMPORTED_MODULE_0_lodash__.extend(options,{projects:createProjects(options.numberOfProjects)}),configName="(projects: "+options.numberOfProjects+", runs: "+options.numRuns.toLocaleString()+")";suite.add("sync: Monte Carlo Math.random "+configName,function(){__webpack_require__.i(__WEBPACK_IMPORTED_MODULE_7__dynamic_monte_carlo__.a)(options)}),addAsyncTest(suite,"parallel-dynamic: Monte Carlo Math.random "+configName,function(){return __webpack_require__.i(__WEBPACK_IMPORTED_MODULE_7__dynamic_monte_carlo__.b)(runOptions)}),suite.add("sync: Monte Carlo simjs "+configName,function(){__webpack_require__.i(__WEBPACK_IMPORTED_MODULE_4__transpiled_monte_carlo__.b)(options)}),addAsyncTest(suite,"parallel-transpiled: Monte Carlo simjs "+configName,function(){return __webpack_require__.i(__WEBPACK_IMPORTED_MODULE_4__transpiled_monte_carlo__.a)(runOptions)}),addAsyncTest(suite,"paralleljs: Monte Carlo simjs "+configName,function(){return __webpack_require__.i(__WEBPACK_IMPORTED_MODULE_9__paralleljs_monte_carlo__.a)(runOptions)}),addThreadJsTest(suite,"threadsjs: Monte Carlo simjs "+configName,__WEBPACK_IMPORTED_MODULE_11__threads_monte_carlo__.a,runOptions),addAsyncTest(suite,"hamstersjs: Monte Carlo Math.random "+configName,function(){return __webpack_require__.i(__WEBPACK_IMPORTED_MODULE_17__hamstersjs_monte_carlo__.a)(runOptions)})}function addMonteCarloTests(suite){var oneMillionRuns=document.querySelector("#monte-carlo-1m").checked,monteCarloOptions={investmentAmount:62e4,numYears:15,performance:.034,seed:10,volatility:.0896},runs=[Math.pow(10,4),Math.pow(10,5)];oneMillionRuns&&runs.push(Math.pow(10,6));for(var _iterator2=runs,_isArray2=Array.isArray(_iterator2),_i2=0,_iterator2=_isArray2?_iterator2:_iterator2[Symbol.iterator]();;){var _ref2;if(_isArray2){if(_i2>=_iterator2.length)break;_ref2=_iterator2[_i2++]}else{if(_i2=_iterator2.next(),_i2.done)break;_ref2=_i2.value}for(var numRuns=_ref2,_arr=[1,4,8,16],_i3=0;_i3<_arr.length;_i3++){var numberOfProjects=_arr[_i3],options=__WEBPACK_IMPORTED_MODULE_0_lodash__.extend({},monteCarloOptions,{numberOfProjects:numberOfProjects,numRuns:numRuns});addMonteCarloTest(suite,options)}}}function addMandelbrotTests(suite){var mandelbrotHeight=parseInt(document.querySelector("#mandelbrot-height").value,10),mandelbrotWidth=parseInt(document.querySelector("#mandelbrot-width").value,10),mandelbrotIterations=parseInt(document.querySelector("#mandelbrot-iterations").value,10),onlyDefaultScheduling=document.querySelector("#mandelbrot-only-default-scheduling").checked,mandelbrotOptions=__webpack_require__.i(__WEBPACK_IMPORTED_MODULE_6__dynamic_mandelbrot__.a)(mandelbrotWidth,mandelbrotHeight,mandelbrotIterations);suite.add("sync: Mandelbrot "+mandelbrotWidth+"x"+mandelbrotHeight+", "+mandelbrotIterations,function(){__webpack_require__.i(__WEBPACK_IMPORTED_MODULE_6__dynamic_mandelbrot__.b)(mandelbrotOptions,function(){})});for(var taskSizes=onlyDefaultScheduling?[void 0]:[void 0,1,150,312,625,1250,2500],_loop2=function(){if(_isArray3){if(_i4>=_iterator3.length)return"break";_ref3=_iterator3[_i4++]}else{if(_i4=_iterator3.next(),_i4.done)return"break";_ref3=_i4.value}var valuesPerTask=_ref3,parallelOptions={maxValuesPerTask:valuesPerTask,minValuesPerTask:valuesPerTask},title="Mandelbrot "+mandelbrotOptions.imageWidth+"x"+mandelbrotOptions.imageHeight+", "+mandelbrotOptions.iterations;valuesPerTask&&(title+=" ("+valuesPerTask+")"),addAsyncTest(suite,"parallel-dynamic: "+title,function(){return __webpack_require__.i(__WEBPACK_IMPORTED_MODULE_6__dynamic_mandelbrot__.c)(mandelbrotOptions,parallelOptions)}),addAsyncTest(suite,"parallel-transpiled: "+title,function(){return __webpack_require__.i(__WEBPACK_IMPORTED_MODULE_2__transpiled_mandelbrot__.a)(mandelbrotOptions,parallelOptions)})},_iterator3=taskSizes,_isArray3=Array.isArray(_iterator3),_i4=0,_iterator3=_isArray3?_iterator3:_iterator3[Symbol.iterator]();;){var _ref3,_ret2=_loop2();if("break"===_ret2)break}addAsyncTest(suite,"paralleljs: Mandelbrot "+mandelbrotWidth+"x"+mandelbrotHeight+", "+mandelbrotIterations,function(){return __webpack_require__.i(__WEBPACK_IMPORTED_MODULE_8__paralleljs_mandelbrot__.a)(mandelbrotOptions)}),addThreadJsTest(suite,"threadsjs: Mandelbrot "+mandelbrotWidth+"x"+mandelbrotHeight+", "+mandelbrotIterations,__WEBPACK_IMPORTED_MODULE_12__threads_mandelbrot__.a,mandelbrotOptions),addAsyncTest(suite,"hamstersjs: Mandelbrot "+mandelbrotWidth+"x"+mandelbrotHeight+", "+mandelbrotIterations,function(){return __webpack_require__.i(__WEBPACK_IMPORTED_MODULE_15__hamstersjs_mandelbrot__.a)(mandelbrotOptions)})}function measure(){var runMonteCarlo=document.querySelector("#monte-carlo").checked,runMandelbrot=document.querySelector("#mandelbrot-field").checked,runKnightTour=document.querySelector("#knight-runner").checked,allTestsSuite=new Benchmark.Suite;runMandelbrot&&addMandelbrotTests(allTestsSuite),runKnightTour&&addKnightBoardTests(allTestsSuite),runMonteCarlo&&addMonteCarloTests(allTestsSuite);var suite=allTestsSuite.filter(function(benchmark){for(var i=0;i<setCheckboxes.length;++i){var checkbox=setCheckboxes[i],parts=checkbox.id.split("-"),name=parts.slice(0,parts.length-1).join("-");if(checkbox.checked&&0===benchmark.name.indexOf(name))return!0}return!1});suite.forEach(function(benchmark){var index=suite.indexOf(benchmark);benchmark.on("cycle",function(){return appendTestResults(benchmark,index)})}),suite.on("cycle",function(event){var benchmark=event.target,index=event.currentTarget.indexOf(benchmark);appendTestResults(benchmark,index)}),suite.on("complete",function(event){var benchmarks=event.currentTarget.map(function(benchmark){return{
info:benchmark.toString,name:benchmark.name,stats:benchmark.stats,times:benchmark.times}});jsonOutputField.textContent=JSON.stringify({benchmarks:benchmarks,platform:platform},void 0,"    "),runButton.disabled=!1}),suite.on("start",initResultTable),suite.run({async:!0})}function initResultTable(event){function clearOutputTable(){for(;outputTable.tBodies.length>0;)outputTable.removeChild(outputTable.tBodies[0])}clearOutputTable();var body=outputTable.createTBody();event.currentTarget.forEach(function(suite){var row=body.insertRow(),_suite$name$split=suite.name.split(":"),set=_suite$name$split[0],nameParts=_suite$name$split.slice(1);row.insertCell().textContent=set,row.insertCell().textContent=nameParts.join(":");for(var columns=outputTable.tHead.rows[0].cells.length,i=0;i<columns;++i)row.insertCell()})}function appendTestResults(benchmark,index){var body=outputTable.tBodies[0],row=body.rows[index];row.cells[2].textContent=benchmark.stats.deviation.toFixed(4),row.cells[3].textContent=benchmark.stats.mean.toFixed(4),row.cells[4].textContent=benchmark.stats.moe.toFixed(4),row.cells[5].textContent=benchmark.stats.rme.toFixed(4),row.cells[6].textContent=benchmark.stats.sem.toFixed(4),row.cells[7].textContent=benchmark.stats.variance.toFixed(4),row.cells[8].textContent=benchmark.stats.sample.length.toFixed(0),row.cells[9].textContent=benchmark.hz.toFixed(4)}function createProjects(count){for(var projects=[],i=0;i<count;++i)projects.push({startYear:Math.round(15*Math.random()),totalAmount:Math.round(1e5*Math.random())});return projects}var __WEBPACK_IMPORTED_MODULE_0_lodash__=__webpack_require__(2),__WEBPACK_IMPORTED_MODULE_1_benchmark__=(__webpack_require__.n(__WEBPACK_IMPORTED_MODULE_0_lodash__),__webpack_require__(27)),__WEBPACK_IMPORTED_MODULE_2__transpiled_mandelbrot__=(__webpack_require__.n(__WEBPACK_IMPORTED_MODULE_1_benchmark__),__webpack_require__(9)),__WEBPACK_IMPORTED_MODULE_3__transpiled_knights_tour__=__webpack_require__(8),__WEBPACK_IMPORTED_MODULE_4__transpiled_monte_carlo__=__webpack_require__(10),__WEBPACK_IMPORTED_MODULE_5__dynamic_knights_tour__=__webpack_require__(5),__WEBPACK_IMPORTED_MODULE_6__dynamic_mandelbrot__=__webpack_require__(6),__WEBPACK_IMPORTED_MODULE_7__dynamic_monte_carlo__=__webpack_require__(7),__WEBPACK_IMPORTED_MODULE_8__paralleljs_mandelbrot__=__webpack_require__(22),__WEBPACK_IMPORTED_MODULE_9__paralleljs_monte_carlo__=__webpack_require__(23),__WEBPACK_IMPORTED_MODULE_10__paralleljs_knights_tour__=__webpack_require__(21),__WEBPACK_IMPORTED_MODULE_11__threads_monte_carlo__=__webpack_require__(26),__WEBPACK_IMPORTED_MODULE_12__threads_mandelbrot__=__webpack_require__(25),__WEBPACK_IMPORTED_MODULE_13__threads_knights_tour__=__webpack_require__(24),__WEBPACK_IMPORTED_MODULE_14_threads__=__webpack_require__(15),__WEBPACK_IMPORTED_MODULE_15__hamstersjs_mandelbrot__=(__webpack_require__.n(__WEBPACK_IMPORTED_MODULE_14_threads__),__webpack_require__(19)),__WEBPACK_IMPORTED_MODULE_16__hamstersjs_knights_tour__=__webpack_require__(18),__WEBPACK_IMPORTED_MODULE_17__hamstersjs_monte_carlo__=__webpack_require__(20),platform=__webpack_require__(28),Benchmark=__WEBPACK_IMPORTED_MODULE_1_benchmark__.runInContext({_:__WEBPACK_IMPORTED_MODULE_0_lodash__});window.Benchmark=Benchmark;var runButton=document.querySelector("#run"),outputTable=document.querySelector("#output-table"),jsonOutputField=document.querySelector("#json-output"),setCheckboxes=document.querySelectorAll('[id*="-set"]'),knightRunner6x6=document.querySelector("#knight-runner-6-6");runButton.addEventListener("click",function(event){event.preventDefault(),runButton.disabled=!0,measure()})}],[45]);
//# sourceMappingURL=performance-measurements.js.map